From 0bc8dac0772692a469d79b4c2fe6124079857642 Mon Sep 17 00:00:00 2001
From: Alexander01998 <contact.wurstimperium@gmail.com>
Date: Tue, 5 Apr 2016 11:11:34 +0200
Subject: [PATCH] Wurst

---
 src/net/minecraft/block/Block.java                 |  17 ++-
 src/net/minecraft/block/BlockCactus.java           |  11 +-
 src/net/minecraft/block/BlockLiquid.java           |  14 +-
 src/net/minecraft/block/BlockSlab.java             |   6 +-
 src/net/minecraft/block/BlockSoulSand.java         |   5 +
 .../minecraft/block/state/BlockStateContainer.java |   3 +-
 src/net/minecraft/block/state/IBlockState.java     |   2 +-
 src/net/minecraft/client/Minecraft.java            |  72 ++++++++--
 .../client/audio/PositionedSoundRecord.java        |   2 +-
 .../minecraft/client/entity/EntityPlayerSP.java    | 154 +++++++++++++++++----
 src/net/minecraft/client/gui/GuiButton.java        |  16 ++-
 src/net/minecraft/client/gui/GuiDisconnected.java  |  87 ++++++++++++
 src/net/minecraft/client/gui/GuiGameOver.java      |  13 +-
 src/net/minecraft/client/gui/GuiIngame.java        |  23 ++-
 src/net/minecraft/client/gui/GuiIngameMenu.java    |  50 ++++++-
 .../client/gui/GuiListWorldSelectionEntry.java     |   2 +-
 src/net/minecraft/client/gui/GuiMainMenu.java      |  20 ++-
 .../minecraft/client/gui/GuiMemoryErrorScreen.java |   4 +-
 src/net/minecraft/client/gui/GuiMultiplayer.java   | 109 +++++++++++----
 src/net/minecraft/client/gui/GuiNewChat.java       |  13 ++
 src/net/minecraft/client/gui/GuiScreenBook.java    |  73 +++++++++-
 .../client/gui/GuiScreenOptionsSounds.java         |   2 +-
 .../minecraft/client/gui/GuiScreenServerList.java  |   9 ++
 .../client/gui/ServerListEntryNormal.java          |  13 +-
 .../minecraft/client/gui/ServerSelectionList.java  |   2 +-
 .../minecraft/client/gui/achievement/GuiStats.java |   2 +-
 .../minecraft/client/gui/inventory/GuiChest.java   |  73 ++++++++++
 .../client/gui/inventory/GuiContainer.java         |  40 +++---
 .../client/gui/inventory/GuiContainerCreative.java |   2 +-
 .../client/gui/inventory/GuiEditSign.java          |  18 +++
 .../client/multiplayer/PlayerControllerMP.java     |  57 +++++---
 .../minecraft/client/multiplayer/ServerList.java   |   6 +
 .../client/network/NetHandlerPlayClient.java       |   6 +-
 .../client/network/NetworkPlayerInfo.java          |  10 ++
 .../client/renderer/BlockModelRenderer.java        |   8 +-
 .../minecraft/client/renderer/EntityRenderer.java  |  47 +++++--
 .../minecraft/client/renderer/RenderGlobal.java    |   2 +-
 .../minecraft/client/renderer/chunk/VisGraph.java  |   4 +-
 .../minecraft/client/renderer/entity/Render.java   |  25 +++-
 .../client/renderer/entity/RenderManager.java      |   6 +-
 .../minecraft/client/resources/SkinManager.java    |   6 +
 src/net/minecraft/client/settings/KeyBinding.java  |   2 +-
 src/net/minecraft/command/CommandEffect.java       |   2 +-
 src/net/minecraft/crash/CrashReport.java           |  56 +++++++-
 src/net/minecraft/entity/Entity.java               |   4 +-
 src/net/minecraft/entity/EntityLivingBase.java     |   6 +-
 src/net/minecraft/entity/monster/EntityZombie.java |   2 +-
 src/net/minecraft/entity/player/EntityPlayer.java  |   7 +-
 src/net/minecraft/network/NetworkManager.java      |  26 ++++
 src/net/minecraft/realms/Realms.java               |   4 +-
 src/net/minecraft/tileentity/TileEntitySign.java   |   2 +-
 51 files changed, 971 insertions(+), 174 deletions(-)

diff --git a/src/net/minecraft/block/Block.java b/src/net/minecraft/block/Block.java
index b386ea0..44bfcdc 100644
--- a/src/net/minecraft/block/Block.java
+++ b/src/net/minecraft/block/Block.java
@@ -1,9 +1,13 @@
 package net.minecraft.block;
 
 import com.google.common.collect.Sets;
+
 import java.util.List;
 import java.util.Random;
 import java.util.Set;
+
+import tk.wurst_client.WurstClient;
+import tk.wurst_client.utils.XRayUtils;
 import net.minecraft.block.material.EnumPushReaction;
 import net.minecraft.block.material.MapColor;
 import net.minecraft.block.material.Material;
@@ -339,7 +343,10 @@ public class Block
 
     public boolean isFullCube(IBlockState state)
     {
-        return true;
+		// TODO: Client
+		return !WurstClient.INSTANCE.mods.xRayMod.isActive()
+			&& !WurstClient.INSTANCE.mods.freecamMod.isActive()
+			&& !WurstClient.INSTANCE.mods.noClipMod.isActive();
     }
 
     public boolean isPassable(IBlockAccess worldIn, BlockPos pos)
@@ -435,6 +442,10 @@ public class Block
 
     public boolean shouldSideBeRendered(IBlockState worldIn, IBlockAccess pos, BlockPos side, EnumFacing facing)
     {
+		// TODO: Client
+		if(WurstClient.INSTANCE.mods.xRayMod.isEnabled())
+			return XRayUtils.isXRayBlock(this);
+    	
         AxisAlignedBB axisalignedbb = worldIn.func_185900_c(pos, side);
 
         switch (facing)
@@ -535,6 +546,10 @@ public class Block
 
     public boolean canCollideCheck(IBlockState state, boolean hitIfLiquid)
     {
+		// TODO: Client
+		if(WurstClient.INSTANCE.mods.ghostHandMod.isActive())
+			return state.getBlock() == getBlockById(WurstClient.INSTANCE.options.ghostHandID);
+		
         return this.isCollidable();
     }
 
diff --git a/src/net/minecraft/block/BlockCactus.java b/src/net/minecraft/block/BlockCactus.java
index d1d7e2c..87b6fa2 100644
--- a/src/net/minecraft/block/BlockCactus.java
+++ b/src/net/minecraft/block/BlockCactus.java
@@ -1,6 +1,8 @@
 package net.minecraft.block;
 
 import java.util.Random;
+
+import tk.wurst_client.WurstClient;
 import net.minecraft.block.material.Material;
 import net.minecraft.block.properties.IProperty;
 import net.minecraft.block.properties.PropertyInteger;
@@ -67,9 +69,14 @@ public class BlockCactus extends Block
         return field_185593_b;
     }
 
-    public AxisAlignedBB getCollisionBoundingBox(IBlockState worldIn, World pos, BlockPos state)
+    public AxisAlignedBB getCollisionBoundingBox(IBlockState worldIn, World world, BlockPos pos)
     {
-        return field_185594_c.offset(state);
+		// TODO: Client
+		if(WurstClient.INSTANCE.mods.antiCactusMod.isActive())
+			return new AxisAlignedBB(pos.getX(), pos.getY(), pos.getZ(),
+				pos.getX() + 1, pos.getY() + 1, pos.getZ() + 1);
+        
+        return field_185594_c.offset(pos);
     }
 
     public boolean isFullCube(IBlockState state)
diff --git a/src/net/minecraft/block/BlockLiquid.java b/src/net/minecraft/block/BlockLiquid.java
index 3914ef9..24bbc3e 100644
--- a/src/net/minecraft/block/BlockLiquid.java
+++ b/src/net/minecraft/block/BlockLiquid.java
@@ -1,6 +1,8 @@
 package net.minecraft.block;
 
 import java.util.Random;
+
+import tk.wurst_client.WurstClient;
 import net.minecraft.block.material.Material;
 import net.minecraft.block.properties.IProperty;
 import net.minecraft.block.properties.PropertyInteger;
@@ -41,12 +43,16 @@ public abstract class BlockLiquid extends Block
 
     public AxisAlignedBB getSelectedBoundingBox(IBlockState worldIn, World pos, BlockPos p_180646_3_)
     {
-        return NULL_AABB;
+		// TODO: Client
+		return WurstClient.INSTANCE.mods.jesusMod.isEnabled() ? FULL_BLOCK_AABB
+			: NULL_AABB;
     }
 
     public boolean isPassable(IBlockAccess worldIn, BlockPos pos)
     {
-        return this.blockMaterial != Material.lava;
+		// TODO: Client
+		return WurstClient.INSTANCE.mods.xRayMod.isEnabled() ? true
+			: this.blockMaterial != Material.lava;
     }
 
     /**
@@ -88,7 +94,9 @@ public abstract class BlockLiquid extends Block
 
     public boolean canCollideCheck(IBlockState state, boolean hitIfLiquid)
     {
-        return hitIfLiquid && ((Integer)state.getValue(LEVEL)).intValue() == 0;
+		// TODO: Client
+		return (hitIfLiquid && ((Integer)state.getValue(LEVEL)).intValue() == 0)
+			|| WurstClient.INSTANCE.mods.liquidsMod.isActive();
     }
 
     /**
diff --git a/src/net/minecraft/block/BlockSlab.java b/src/net/minecraft/block/BlockSlab.java
index 508aaa0..6084cdc 100644
--- a/src/net/minecraft/block/BlockSlab.java
+++ b/src/net/minecraft/block/BlockSlab.java
@@ -1,6 +1,8 @@
 package net.minecraft.block;
 
 import java.util.Random;
+
+import tk.wurst_client.WurstClient;
 import net.minecraft.block.material.Material;
 import net.minecraft.block.properties.IProperty;
 import net.minecraft.block.properties.PropertyEnum;
@@ -76,7 +78,9 @@ public abstract class BlockSlab extends Block
 
     public boolean isFullCube(IBlockState state)
     {
-        return this.isDouble();
+		// TODO: Client
+		return this.isDouble()
+			&& !WurstClient.INSTANCE.mods.freecamMod.isActive();
     }
 
     public boolean shouldSideBeRendered(IBlockState worldIn, IBlockAccess pos, BlockPos side, EnumFacing facing)
diff --git a/src/net/minecraft/block/BlockSoulSand.java b/src/net/minecraft/block/BlockSoulSand.java
index 4e9e618..c8a4bde 100644
--- a/src/net/minecraft/block/BlockSoulSand.java
+++ b/src/net/minecraft/block/BlockSoulSand.java
@@ -1,5 +1,6 @@
 package net.minecraft.block;
 
+import tk.wurst_client.WurstClient;
 import net.minecraft.block.material.MapColor;
 import net.minecraft.block.material.Material;
 import net.minecraft.block.state.IBlockState;
@@ -29,6 +30,10 @@ public class BlockSoulSand extends Block
      */
     public void onEntityCollidedWithBlock(World worldIn, BlockPos pos, IBlockState state, Entity entityIn)
     {
+		// TODO: Client
+		if(WurstClient.INSTANCE.mods.noSlowdownMod.isActive())
+			return;
+		
         entityIn.motionX *= 0.4D;
         entityIn.motionZ *= 0.4D;
     }
diff --git a/src/net/minecraft/block/state/BlockStateContainer.java b/src/net/minecraft/block/state/BlockStateContainer.java
index 72ab5aa..7148dae 100644
--- a/src/net/minecraft/block/state/BlockStateContainer.java
+++ b/src/net/minecraft/block/state/BlockStateContainer.java
@@ -177,7 +177,8 @@ public class BlockStateContainer
             }
         }
 
-        public <T extends Comparable<T>, V extends T> IBlockState withProperty(IProperty<T> property, V value)
+        @Override
+        public <T extends Comparable<T>, V extends T> IBlockState withProperty(IProperty<T> property, Comparable<?> value)
         {
             if (!this.properties.containsKey(property))
             {
diff --git a/src/net/minecraft/block/state/IBlockState.java b/src/net/minecraft/block/state/IBlockState.java
index e590b46..157dc4b 100644
--- a/src/net/minecraft/block/state/IBlockState.java
+++ b/src/net/minecraft/block/state/IBlockState.java
@@ -11,7 +11,7 @@ public interface IBlockState extends IBlockProperties
 
     <T extends Comparable<T>> T getValue(IProperty<T> property);
 
-    <T extends Comparable<T>, V extends T> IBlockState withProperty(IProperty<T> property, V value);
+    <T extends Comparable<T>, V extends T> IBlockState withProperty(IProperty<T> property, Comparable<?> value);
 
     <T extends Comparable<T>> IBlockState cycleProperty(IProperty<T> property);
 
diff --git a/src/net/minecraft/client/Minecraft.java b/src/net/minecraft/client/Minecraft.java
index 61b2545..c89d45c 100644
--- a/src/net/minecraft/client/Minecraft.java
+++ b/src/net/minecraft/client/Minecraft.java
@@ -12,6 +12,7 @@ import com.mojang.authlib.GameProfileRepository;
 import com.mojang.authlib.minecraft.MinecraftSessionService;
 import com.mojang.authlib.properties.PropertyMap;
 import com.mojang.authlib.yggdrasil.YggdrasilAuthenticationService;
+
 import java.awt.image.BufferedImage;
 import java.io.File;
 import java.io.IOException;
@@ -35,7 +36,9 @@ import java.util.UUID;
 import java.util.concurrent.Callable;
 import java.util.concurrent.Executors;
 import java.util.concurrent.FutureTask;
+
 import javax.imageio.ImageIO;
+
 import net.minecraft.block.Block;
 import net.minecraft.block.material.Material;
 import net.minecraft.block.state.IBlockState;
@@ -48,7 +51,7 @@ import net.minecraft.client.gui.GuiControls;
 import net.minecraft.client.gui.GuiGameOver;
 import net.minecraft.client.gui.GuiIngame;
 import net.minecraft.client.gui.GuiIngameMenu;
-import net.minecraft.client.gui.GuiMainMenu;
+import tk.wurst_client.gui.main.GuiWurstMainMenu;
 import net.minecraft.client.gui.GuiMemoryErrorScreen;
 import net.minecraft.client.gui.GuiMultiplayer;
 import net.minecraft.client.gui.GuiNewChat;
@@ -180,6 +183,7 @@ import net.minecraft.world.chunk.storage.AnvilSaveConverter;
 import net.minecraft.world.storage.ISaveFormat;
 import net.minecraft.world.storage.ISaveHandler;
 import net.minecraft.world.storage.WorldInfo;
+
 import org.apache.commons.io.IOUtils;
 import org.apache.commons.lang3.Validate;
 import org.apache.logging.log4j.LogManager;
@@ -196,10 +200,18 @@ import org.lwjgl.opengl.OpenGLException;
 import org.lwjgl.opengl.PixelFormat;
 import org.lwjgl.util.glu.GLU;
 
+import tk.wurst_client.WurstClient;
+import tk.wurst_client.events.LeftClickEvent;
+import tk.wurst_client.hooks.FrameHook;
+import tk.wurst_client.spam.SpamProcessor;
+
 public class Minecraft implements IThreadListener, ISnooperInfo
 {
     private static final Logger logger = LogManager.getLogger();
-    private static final ResourceLocation locationMojangPng = new ResourceLocation("textures/gui/title/mojang.png");
+    
+    // TODO: Client
+    private static final ResourceLocation locationMojangPng = new ResourceLocation("wurst/wurst_loading.png");
+    
     public static final boolean isRunningOnMac = Util.getOSType() == Util.EnumOS.OSX;
 
     /** A 10MiB preallocation to ensure the heap is reasonably sized. */
@@ -232,7 +244,7 @@ public class Minecraft implements IThreadListener, ISnooperInfo
 
     /** True if the player is connected to a realms server */
     private boolean connectedToRealms = false;
-    private Timer timer = new Timer(20.0F);
+    public Timer timer = new Timer(20.0F);
 
     /** Instance of PlayerUsageSnooper. */
     private Snooper usageSnooper = new Snooper("client", this, MinecraftServer.getCurrentTimeMillis());
@@ -245,7 +257,7 @@ public class Minecraft implements IThreadListener, ISnooperInfo
     private Entity renderViewEntity;
     public Entity pointedEntity;
     public EffectRenderer effectRenderer;
-    private final Session session;
+    public Session session;
     private boolean isGamePaused;
 
     /** The font renderer used for displaying and measuring text */
@@ -301,7 +313,7 @@ public class Minecraft implements IThreadListener, ISnooperInfo
     /**
      * When you place a block, it's set to 6, decremented once per tick, when it's 0, you can place another block.
      */
-    private int rightClickDelayTimer;
+    public int rightClickDelayTimer;
     private String serverName;
     private int serverPort;
 
@@ -586,13 +598,16 @@ public class Minecraft implements IThreadListener, ISnooperInfo
         this.checkGLError("Post startup");
         this.ingameGUI = new GuiIngame(this);
 
+        //TODO: Client
+        WurstClient.INSTANCE.startClient();
+
         if (this.serverName != null)
         {
-            this.displayGuiScreen(new GuiConnecting(new GuiMainMenu(), this, this.serverName, this.serverPort));
+            this.displayGuiScreen(new GuiConnecting(new GuiWurstMainMenu(), this, this.serverName, this.serverPort));
         }
         else
         {
-            this.displayGuiScreen(new GuiMainMenu());
+            this.displayGuiScreen(new GuiWurstMainMenu());
         }
 
         this.renderEngine.deleteTexture(this.mojangLogo);
@@ -670,6 +685,9 @@ public class Minecraft implements IThreadListener, ISnooperInfo
         else
         {
             Display.setDisplayMode(new DisplayMode(this.displayWidth, this.displayHeight));
+            
+            // TODO: Client
+        	FrameHook.createFrame(mcDefaultResourcePack, logger);
         }
     }
 
@@ -997,14 +1015,14 @@ public class Minecraft implements IThreadListener, ISnooperInfo
 
         if (guiScreenIn == null && this.theWorld == null)
         {
-            guiScreenIn = new GuiMainMenu();
+            guiScreenIn = new GuiWurstMainMenu();
         }
         else if (guiScreenIn == null && this.thePlayer.getHealth() <= 0.0F)
         {
             guiScreenIn = new GuiGameOver((ITextComponent)null);
         }
 
-        if (guiScreenIn instanceof GuiMainMenu || guiScreenIn instanceof GuiMultiplayer)
+        if (guiScreenIn instanceof GuiWurstMainMenu || guiScreenIn instanceof GuiMultiplayer)
         {
             this.gameSettings.showDebugInfo = false;
             this.ingameGUI.getChatGUI().clearChatMessages();
@@ -1530,6 +1548,9 @@ public class Minecraft implements IThreadListener, ISnooperInfo
     {
         if (this.leftClickCounter <= 0)
         {
+            //TODO: Client
+        	WurstClient.INSTANCE.events.fireEvent(LeftClickEvent.class, new LeftClickEvent());
+        	
             if (this.objectMouseOver == null)
             {
                 logger.error("Null returned as \'hitResult\', this shouldn\'t happen!");
@@ -1571,12 +1592,12 @@ public class Minecraft implements IThreadListener, ISnooperInfo
         }
     }
 
-    @SuppressWarnings("incomplete-switch")
 
     /**
      * Called when user clicked he's mouse right button (place)
      */
-    private void rightClickMouse()
+    @SuppressWarnings("incomplete-switch")
+	public void rightClickMouse()
     {
         if (!this.playerController.getIsHittingBlock())
         {
@@ -1641,7 +1662,7 @@ public class Minecraft implements IThreadListener, ISnooperInfo
 
                     ItemStack itemstack1 = this.thePlayer.getHeldItem(enumhand);
 
-                    if (itemstack1 != null && this.playerController.func_187101_a(this.thePlayer, this.theWorld, itemstack1, enumhand) == EnumActionResult.SUCCESS)
+                    if (itemstack1 != null && this.playerController.sendUseItem(this.thePlayer, this.theWorld, itemstack1, enumhand) == EnumActionResult.SUCCESS)
                     {
                         this.entityRenderer.itemRenderer.func_187460_a(enumhand);
                         return;
@@ -1803,7 +1824,9 @@ public class Minecraft implements IThreadListener, ISnooperInfo
             this.leftClickCounter = 10000;
         }
 
-        if (this.currentScreen != null)
+		// TODO: Client
+		if(this.currentScreen != null
+			&& !WurstClient.INSTANCE.mods.menuWalkMod.shouldAllowWalking())
         {
             try
             {
@@ -1845,7 +1868,9 @@ public class Minecraft implements IThreadListener, ISnooperInfo
             }
         }
 
-        if (this.currentScreen == null || this.currentScreen.allowUserInput)
+		// TODO: Client
+		if(this.currentScreen == null || this.currentScreen.allowUserInput
+			|| WurstClient.INSTANCE.mods.menuWalkMod.shouldAllowWalking())
         {
             this.mcProfiler.endStartSection("mouse");
             this.func_184124_aB();
@@ -1939,7 +1964,9 @@ public class Minecraft implements IThreadListener, ISnooperInfo
 
             this.mcProfiler.endStartSection("animateTick");
 
-            if (!this.isGamePaused && this.theWorld != null)
+            // TODO: Client
+            if (!this.isGamePaused && this.theWorld != null
+				&& !WurstClient.INSTANCE.mods.freecamMod.isActive())
             {
                 this.theWorld.doVoidFogParticles(MathHelper.floor_double(this.thePlayer.posX), MathHelper.floor_double(this.thePlayer.posY), MathHelper.floor_double(this.thePlayer.posZ));
             }
@@ -2005,6 +2032,14 @@ public class Minecraft implements IThreadListener, ISnooperInfo
 
                 if (this.currentScreen == null)
                 {
+                	//TODO: Client
+        			if(Keyboard.getEventKey() != 0)
+        			{
+        				String eventCommand = WurstClient.INSTANCE.keybinds.get(Keyboard.getKeyName(Keyboard.getEventKey()));
+        				if(eventCommand != null)
+        					thePlayer.sendAutomaticChatMessage(eventCommand);
+        			}
+        			
                     if (i == 1)
                     {
                         this.displayInGameMenu();
@@ -2440,6 +2475,10 @@ public class Minecraft implements IThreadListener, ISnooperInfo
         networkmanager.sendPacket(new C00Handshake(107, socketaddress.toString(), 0, EnumConnectionState.LOGIN));
         networkmanager.sendPacket(new CPacketLoginStart(this.getSession().getProfile()));
         this.myNetworkManager = networkmanager;
+        
+        //TODO: Client
+        SpamProcessor.runScript("joinworld", "Runs whenever you join a singleplayer world.");
+		WurstClient.INSTANCE.analytics.trackPageView("/play/singleplayer", "Singleplayer");
     }
 
     /**
@@ -2644,6 +2683,9 @@ public class Minecraft implements IThreadListener, ISnooperInfo
             }
             else
             {
+				// TODO: Client
+				WurstClient.INSTANCE.friends.middleClick(objectMouseOver.entityHit);
+				
                 if (this.objectMouseOver.typeOfHit != RayTraceResult.Type.ENTITY || this.objectMouseOver.entityHit == null || !flag)
                 {
                     return;
diff --git a/src/net/minecraft/client/audio/PositionedSoundRecord.java b/src/net/minecraft/client/audio/PositionedSoundRecord.java
index 20aa9ae..be0e158 100644
--- a/src/net/minecraft/client/audio/PositionedSoundRecord.java
+++ b/src/net/minecraft/client/audio/PositionedSoundRecord.java
@@ -12,7 +12,7 @@ public class PositionedSoundRecord extends PositionedSound
         this(p_i46527_1_, p_i46527_2_, p_i46527_3_, p_i46527_4_, (float)p_i46527_5_.getX() + 0.5F, (float)p_i46527_5_.getY() + 0.5F, (float)p_i46527_5_.getZ() + 0.5F);
     }
 
-    public static PositionedSoundRecord func_184371_a(SoundEvent p_184371_0_, float p_184371_1_)
+    public static PositionedSoundRecord createPositionedSoundRecord(SoundEvent p_184371_0_, float p_184371_1_)
     {
         return new PositionedSoundRecord(p_184371_0_, SoundCategory.MASTER, 0.25F, p_184371_1_, false, 0, ISound.AttenuationType.NONE, 0.0F, 0.0F, 0.0F);
     }
diff --git a/src/net/minecraft/client/entity/EntityPlayerSP.java b/src/net/minecraft/client/entity/EntityPlayerSP.java
index 61b85c2..5793cc2 100644
--- a/src/net/minecraft/client/entity/EntityPlayerSP.java
+++ b/src/net/minecraft/client/entity/EntityPlayerSP.java
@@ -1,5 +1,6 @@
 package net.minecraft.client.entity;
 
+import net.minecraft.block.material.Material;
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.audio.MovingSoundMinecartRiding;
 import net.minecraft.client.audio.PositionedSoundRecord;
@@ -10,15 +11,7 @@ import net.minecraft.client.gui.GuiMerchant;
 import net.minecraft.client.gui.GuiRepair;
 import net.minecraft.client.gui.GuiScreen;
 import net.minecraft.client.gui.GuiScreenBook;
-import net.minecraft.client.gui.inventory.GuiBeacon;
-import net.minecraft.client.gui.inventory.GuiBrewingStand;
-import net.minecraft.client.gui.inventory.GuiChest;
-import net.minecraft.client.gui.inventory.GuiCrafting;
-import net.minecraft.client.gui.inventory.GuiDispenser;
-import net.minecraft.client.gui.inventory.GuiEditCommandBlockMinecart;
-import net.minecraft.client.gui.inventory.GuiEditSign;
-import net.minecraft.client.gui.inventory.GuiFurnace;
-import net.minecraft.client.gui.inventory.GuiScreenHorseInventory;
+import net.minecraft.client.gui.inventory.*;
 import net.minecraft.client.network.NetHandlerPlayClient;
 import net.minecraft.entity.Entity;
 import net.minecraft.entity.IJumpingMount;
@@ -36,16 +29,8 @@ import net.minecraft.item.Item;
 import net.minecraft.item.ItemElytra;
 import net.minecraft.item.ItemStack;
 import net.minecraft.network.datasync.DataParameter;
-import net.minecraft.network.play.client.CPacketAnimation;
-import net.minecraft.network.play.client.CPacketChatMessage;
-import net.minecraft.network.play.client.CPacketClientStatus;
-import net.minecraft.network.play.client.CPacketCloseWindow;
-import net.minecraft.network.play.client.CPacketEntityAction;
-import net.minecraft.network.play.client.CPacketInput;
-import net.minecraft.network.play.client.CPacketPlayer;
-import net.minecraft.network.play.client.CPacketPlayerAbilities;
-import net.minecraft.network.play.client.CPacketPlayerDigging;
-import net.minecraft.network.play.client.CPacketVehicleMove;
+import net.minecraft.network.play.client.*;
+import net.minecraft.network.play.client.CPacketEntityAction.Action;
 import net.minecraft.potion.Potion;
 import net.minecraft.potion.PotionEffect;
 import net.minecraft.stats.StatBase;
@@ -65,6 +50,11 @@ import net.minecraft.util.math.MathHelper;
 import net.minecraft.util.text.ITextComponent;
 import net.minecraft.world.IInteractionObject;
 import net.minecraft.world.World;
+import tk.wurst_client.WurstClient;
+import tk.wurst_client.events.ChatOutputEvent;
+import tk.wurst_client.events.UpdateEvent;
+import tk.wurst_client.mods.BlinkMod;
+import tk.wurst_client.utils.EntityUtils;
 
 public class EntityPlayerSP extends AbstractClientPlayer
 {
@@ -205,6 +195,10 @@ public class EntityPlayerSP extends AbstractClientPlayer
     {
         if (this.worldObj.isBlockLoaded(new BlockPos(this.posX, 0.0D, this.posZ)))
         {
+        	//TODO: Client
+        	WurstClient wurst = WurstClient.INSTANCE;
+			wurst.events.fireEvent(UpdateEvent.class, new UpdateEvent());
+			
             super.onUpdate();
 
             if (this.isRiding())
@@ -222,6 +216,18 @@ public class EntityPlayerSP extends AbstractClientPlayer
             {
                 this.onUpdateWalkingPlayer();
             }
+            
+            // TODO: Client
+            // TODO: Event management for this
+            if(wurst.mods.sneakMod.isActive())
+            {
+    			NetHandlerPlayClient sendQueue =
+    				Minecraft.getMinecraft().thePlayer.sendQueue;
+    			sendQueue.addToSendQueue(new CPacketEntityAction(Minecraft
+    				.getMinecraft().thePlayer, Action.STOP_SNEAKING));
+    			sendQueue.addToSendQueue(new CPacketEntityAction(Minecraft
+    				.getMinecraft().thePlayer, Action.START_SNEAKING));
+            }
         }
     }
 
@@ -264,24 +270,90 @@ public class EntityPlayerSP extends AbstractClientPlayer
 
         if (this.isCurrentViewEntity())
         {
+        	// TODO: Client
+        	float yaw;
+        	float pitch;
+        	if(EntityUtils.lookChanged)
+        	{
+        		yaw =  EntityUtils.yaw;
+        		pitch = EntityUtils.pitch;
+        		EntityUtils.lookChanged = false;
+        	}else
+        	{
+        		yaw =  rotationYaw;
+        		pitch = rotationPitch;
+        	}
+        	
             AxisAlignedBB axisalignedbb = this.getEntityBoundingBox();
             double d0 = this.posX - this.lastReportedPosX;
             double d1 = axisalignedbb.minY - this.lastReportedPosY;
             double d2 = this.posZ - this.lastReportedPosZ;
-            double d3 = (double)(this.rotationYaw - this.lastReportedYaw);
-            double d4 = (double)(this.rotationPitch - this.lastReportedPitch);
+            double d3 = (double)(yaw - this.lastReportedYaw);
+            double d4 = (double)(pitch - this.lastReportedPitch);
             ++this.positionUpdateTicks;
             boolean flag2 = d0 * d0 + d1 * d1 + d2 * d2 > 9.0E-4D || this.positionUpdateTicks >= 20;
             boolean flag3 = d3 != 0.0D || d4 != 0.0D;
 
-            if (this.isRiding())
+
+			// TODO: Client
+			// Stops motion updates
+			if(WurstClient.INSTANCE.mods.remoteViewMod.isActive()
+				|| WurstClient.INSTANCE.mods.freecamMod.isActive()
+				|| (WurstClient.INSTANCE.mods.potionSaverMod.isActive()
+					&& !getActivePotionEffects().isEmpty() && motionX == 0 && motionZ == 0))
             {
-                this.sendQueue.addToSendQueue(new CPacketPlayer.C06PacketPlayerPosLook(this.motionX, -999.0D, this.motionZ, this.rotationYaw, this.rotationPitch, this.onGround));
+				
+			}else if(WurstClient.INSTANCE.mods.blinkMod.isActive())
+            {//Redirects motion updates to the Blink queue
+                if (flag2 && flag3)
+                {
+                    BlinkMod.addToBlinkQueue(new CPacketPlayer.C06PacketPlayerPosLook(this.posX, this.getEntityBoundingBox().minY, this.posZ, yaw, pitch, this.onGround));
+                }
+                else if (flag2)
+                {
+                	BlinkMod.addToBlinkQueue(new CPacketPlayer.C04PacketPlayerPosition(this.posX, this.getEntityBoundingBox().minY, this.posZ, this.onGround));
+                }
+                else if (flag3)
+                {
+                	BlinkMod.addToBlinkQueue(new CPacketPlayer.C05PacketPlayerLook(yaw, pitch, this.onGround));
+                }
+                else
+                {
+                	BlinkMod.addToBlinkQueue(new CPacketPlayer(this.onGround));
+                }
+			}else if(WurstClient.INSTANCE.mods.jesusMod.isActive()
+				&& WurstClient.INSTANCE.mods.yesCheatMod.isActive()
+				&& !isInWater()
+				&& Minecraft.getMinecraft().theWorld
+					.getBlockState(new BlockPos(this).add(0, -1, 0)).getBlock()
+					.getMaterial(null) == Material.water)
+			{
+				if(flag2)
+				{
+					this.sendQueue
+						.addToSendQueue(new CPacketPlayer.C06PacketPlayerPosLook(
+							this.posX, this.getEntityBoundingBox().minY
+								+ (ticksExisted % 2 == 0 ? 0.05 : -0.05),
+							this.posZ, yaw, pitch,
+							this.onGround));
+				}else if(flag3)
+				{
+					this.sendQueue
+						.addToSendQueue(new CPacketPlayer.C05PacketPlayerLook(
+							yaw, pitch, this.onGround));
+				}else
+				{
+					this.sendQueue.addToSendQueue(new CPacketPlayer(
+						this.onGround));
+				}
+			}else if (this.isRiding())
+            {
+                this.sendQueue.addToSendQueue(new CPacketPlayer.C06PacketPlayerPosLook(this.motionX, -999.0D, this.motionZ, yaw, pitch, this.onGround));
                 flag2 = false;
             }
             else if (flag2 && flag3)
             {
-                this.sendQueue.addToSendQueue(new CPacketPlayer.C06PacketPlayerPosLook(this.posX, axisalignedbb.minY, this.posZ, this.rotationYaw, this.rotationPitch, this.onGround));
+                this.sendQueue.addToSendQueue(new CPacketPlayer.C06PacketPlayerPosLook(this.posX, axisalignedbb.minY, this.posZ, yaw, pitch, this.onGround));
             }
             else if (flag2)
             {
@@ -289,7 +361,7 @@ public class EntityPlayerSP extends AbstractClientPlayer
             }
             else if (flag3)
             {
-                this.sendQueue.addToSendQueue(new CPacketPlayer.C05PacketPlayerLook(this.rotationYaw, this.rotationPitch, this.onGround));
+                this.sendQueue.addToSendQueue(new CPacketPlayer.C05PacketPlayerLook(yaw, pitch, this.onGround));
             }
             else if (this.field_184841_cd != this.onGround)
             {
@@ -332,9 +404,31 @@ public class EntityPlayerSP extends AbstractClientPlayer
     /**
      * Sends a chat message from the player. Args: chatMessage
      */
-    public void sendChatMessage(String message)
+    public void sendChatMessage(String p_71165_1_)
     {
-        this.sendQueue.addToSendQueue(new CPacketChatMessage(message));
+        //TODO: Client
+      	ChatOutputEvent event = new ChatOutputEvent(p_71165_1_, false);
+      	WurstClient.INSTANCE.commands.onSentMessage(event);
+      	WurstClient.INSTANCE.events.fireEvent(ChatOutputEvent.class, event);
+      	if(event.isCancelled())
+      		return;
+      	
+        this.sendQueue.addToSendQueue(new CPacketChatMessage(event.getMessage()));
+    }
+
+    /**
+     * Sends a chat message from the player. Args: chatMessage
+     */
+    public void sendAutomaticChatMessage(String message)
+    {
+        //TODO: Client
+      	ChatOutputEvent event = new ChatOutputEvent(message, true);
+      	WurstClient.INSTANCE.commands.onSentMessage(event);
+      	WurstClient.INSTANCE.events.fireEvent(ChatOutputEvent.class, event);
+      	if(event.isCancelled())
+      		return;
+      	
+        this.sendQueue.addToSendQueue(new CPacketChatMessage(event.getMessage()));
     }
 
     public void swingArm(EnumHand hand)
@@ -847,7 +941,7 @@ public class EntityPlayerSP extends AbstractClientPlayer
 
             if (this.timeInPortal == 0.0F)
             {
-                this.mc.getSoundHandler().playSound(PositionedSoundRecord.func_184371_a(SoundEvents.block_portal_trigger, this.rand.nextFloat() * 0.4F + 0.8F));
+                this.mc.getSoundHandler().playSound(PositionedSoundRecord.createPositionedSoundRecord(SoundEvents.block_portal_trigger, this.rand.nextFloat() * 0.4F + 0.8F));
             }
 
             this.timeInPortal += 0.0125F;
@@ -1052,7 +1146,7 @@ public class EntityPlayerSP extends AbstractClientPlayer
         return this.field_184844_co;
     }
 
-    public PotionEffect func_184596_c(Potion p_184596_1_)
+    public PotionEffect removePotionEffectClient(Potion p_184596_1_)
     {
         if (p_184596_1_ == MobEffects.confusion)
         {
@@ -1060,6 +1154,6 @@ public class EntityPlayerSP extends AbstractClientPlayer
             this.timeInPortal = 0.0F;
         }
 
-        return super.func_184596_c(p_184596_1_);
+        return super.removePotionEffectClient(p_184596_1_);
     }
 }
diff --git a/src/net/minecraft/client/gui/GuiButton.java b/src/net/minecraft/client/gui/GuiButton.java
index cdb4e57..82cb9ea 100644
--- a/src/net/minecraft/client/gui/GuiButton.java
+++ b/src/net/minecraft/client/gui/GuiButton.java
@@ -88,8 +88,18 @@ public class GuiButton extends Gui
             GlStateManager.enableBlend();
             GlStateManager.tryBlendFuncSeparate(GlStateManager.SourceFactor.SRC_ALPHA, GlStateManager.DestFactor.ONE_MINUS_SRC_ALPHA, GlStateManager.SourceFactor.ONE, GlStateManager.DestFactor.ZERO);
             GlStateManager.blendFunc(GlStateManager.SourceFactor.SRC_ALPHA, GlStateManager.DestFactor.ONE_MINUS_SRC_ALPHA);
-            this.drawTexturedModalRect(this.xPosition, this.yPosition, 0, 46 + i * 20, this.width / 2, this.height);
-            this.drawTexturedModalRect(this.xPosition + this.width / 2, this.yPosition, 200 - this.width / 2, 46 + i * 20, this.width / 2, this.height);
+
+            // TODO: Client
+			drawTexturedModalRect(xPosition, yPosition, 0, 46 + i * 20,
+				width / 2, height / 2);
+			drawTexturedModalRect(xPosition + width / 2, yPosition,
+				200 - width / 2, 46 + i * 20, width / 2, height / 2);
+			drawTexturedModalRect(xPosition, yPosition + height / 2, 0, 46 + i
+				* 20 + 20 - height / 2, width / 2, height / 2);
+			drawTexturedModalRect(xPosition + width / 2,
+				yPosition + height / 2, 200 - width / 2, 46 + i * 20 + 20
+					- height / 2, width / 2, height / 2);
+			
             this.mouseDragged(mc, mouseX, mouseY);
             int j = 14737632;
 
@@ -143,7 +153,7 @@ public class GuiButton extends Gui
 
     public void playPressSound(SoundHandler soundHandlerIn)
     {
-        soundHandlerIn.playSound(PositionedSoundRecord.func_184371_a(SoundEvents.ui_button_click, 1.0F));
+        soundHandlerIn.playSound(PositionedSoundRecord.createPositionedSoundRecord(SoundEvents.ui_button_click, 1.0F));
     }
 
     public int getButtonWidth()
diff --git a/src/net/minecraft/client/gui/GuiDisconnected.java b/src/net/minecraft/client/gui/GuiDisconnected.java
index 4a7f37e..a4a75f7 100644
--- a/src/net/minecraft/client/gui/GuiDisconnected.java
+++ b/src/net/minecraft/client/gui/GuiDisconnected.java
@@ -2,6 +2,11 @@ package net.minecraft.client.gui;
 
 import java.io.IOException;
 import java.util.List;
+
+import org.apache.logging.log4j.LogManager;
+
+import tk.wurst_client.WurstClient;
+import tk.wurst_client.hooks.ServerHook;
 import net.minecraft.client.resources.I18n;
 import net.minecraft.util.text.ITextComponent;
 
@@ -13,11 +18,20 @@ public class GuiDisconnected extends GuiScreen
     private final GuiScreen parentScreen;
     private int field_175353_i;
     
+    //TODO: Client
+	private int autoReconnectTimer;
+
     public GuiDisconnected(GuiScreen screen, String reasonLocalizationKey, ITextComponent chatComp)
     {
         this.parentScreen = screen;
         this.reason = I18n.format(reasonLocalizationKey, new Object[0]);
         this.message = chatComp;
+
+        //TODO: Client
+		LogManager.getLogger().info(
+			"Disconnected.\n    Message: "
+				+ (message == null ? null : message.getUnformattedText())
+				+ "\n    Reason: " + reason);
     }
 
     /**
@@ -38,6 +52,58 @@ public class GuiDisconnected extends GuiScreen
         this.multilineMessage = this.fontRendererObj.listFormattedStringToWidth(this.message.getFormattedText(), this.width - 50);
         this.field_175353_i = this.multilineMessage.size() * this.fontRendererObj.FONT_HEIGHT;
         this.buttonList.add(new GuiButton(0, this.width / 2 - 100, this.height / 2 + this.field_175353_i / 2 + this.fontRendererObj.FONT_HEIGHT, I18n.format("gui.toMenu", new Object[0])));
+        
+		// TODO: Client
+		this.buttonList.add(new GuiButton(1, this.width / 2 - 100, this.height
+			/ 2 + this.field_175353_i / 2 + this.fontRendererObj.FONT_HEIGHT
+			+ 24, "Reconnect"));
+		this.buttonList.add(new GuiButton(2, this.width / 2 - 100, this.height
+			/ 2 + this.field_175353_i / 2 + this.fontRendererObj.FONT_HEIGHT
+			+ 48, "AutoReconnect"));
+		if(message.getUnformattedText().toLowerCase().contains("whitelist")
+			|| message.getUnformattedText().toLowerCase()
+				.contains("white-list"))
+			if(parentScreen instanceof GuiMultiplayer
+				&& ((GuiMultiplayer)parentScreen).serverListSelector
+					.getSelectedServer() != -1)
+				this.buttonList.add(new GuiButton(3, this.width / 2 - 100,
+					this.height / 2 + this.field_175353_i / 2
+						+ this.fontRendererObj.FONT_HEIGHT + 72,
+					"§4Delete Server§r"));
+		if(WurstClient.INSTANCE.options.autoReconnect)
+			this.autoReconnectTimer = 100;
+    }
+
+    //TODO: Client
+    /**
+     * Called from the main game loop to update the screen.
+     */
+    public void updateScreen()
+    {
+        super.updateScreen();
+        if(WurstClient.INSTANCE.options.autoReconnect)
+		{
+			if(buttonList.size() < 2)
+				return;
+			((GuiButton)this.buttonList.get(2)).displayString =
+				"AutoReconnect (" + ((this.autoReconnectTimer / 20) + 1) + ")";
+			if(this.autoReconnectTimer > 0)
+				this.autoReconnectTimer--;
+			else
+			{
+				try
+				{
+					this.actionPerformed((GuiButton)this.buttonList.get(1));
+				}catch(IOException e)
+				{
+					e.printStackTrace();
+				}
+			}
+		}
+        else
+        {
+        	((GuiButton)this.buttonList.get(2)).displayString = "AutoReconnect";
+        }
     }
 
     /**
@@ -48,6 +114,27 @@ public class GuiDisconnected extends GuiScreen
         if (button.id == 0)
         {
             this.mc.displayGuiScreen(this.parentScreen);
+            
+			// TODO: Client
+		}else if(button.id == 1)
+		{
+			ServerHook.reconnectToLastServer(this);
+		}else if(button.id == 2)
+		{
+			WurstClient.INSTANCE.options.autoReconnect =
+				!WurstClient.INSTANCE.options.autoReconnect;
+			WurstClient.INSTANCE.files.saveOptions();
+			if(WurstClient.INSTANCE.options.autoReconnect)
+				this.autoReconnectTimer = 100;
+		}else if(button.id == 3)
+		{
+			GuiMultiplayer servers = (GuiMultiplayer)parentScreen;
+			servers.savedServerList.removeServerData(servers.serverListSelector
+				.getSelectedServer());
+			servers.savedServerList.saveServerList();
+			servers.serverListSelector.setSelectedSlotIndex(-1);
+			servers.serverListSelector.func_148195_a(servers.savedServerList);
+			mc.displayGuiScreen(servers);
 		}
     }
 
diff --git a/src/net/minecraft/client/gui/GuiGameOver.java b/src/net/minecraft/client/gui/GuiGameOver.java
index 08d7720..0404908 100644
--- a/src/net/minecraft/client/gui/GuiGameOver.java
+++ b/src/net/minecraft/client/gui/GuiGameOver.java
@@ -1,6 +1,11 @@
 package net.minecraft.client.gui;
 
 import java.io.IOException;
+
+import tk.wurst_client.WurstClient;
+import tk.wurst_client.events.DeathEvent;
+import tk.wurst_client.gui.main.GuiWurstMainMenu;
+import tk.wurst_client.spam.SpamProcessor;
 import net.minecraft.client.multiplayer.WorldClient;
 import net.minecraft.client.renderer.GlStateManager;
 import net.minecraft.client.resources.I18n;
@@ -74,7 +79,7 @@ public class GuiGameOver extends GuiScreen implements GuiYesNoCallback
             case 1:
                 if (this.mc.theWorld.getWorldInfo().isHardcoreModeEnabled())
                 {
-                    this.mc.displayGuiScreen(new GuiMainMenu());
+                    this.mc.displayGuiScreen(new GuiWurstMainMenu());
                 }
                 else
                 {
@@ -95,7 +100,7 @@ public class GuiGameOver extends GuiScreen implements GuiYesNoCallback
             }
 
             this.mc.loadWorld((WorldClient)null);
-            this.mc.displayGuiScreen(new GuiMainMenu());
+            this.mc.displayGuiScreen(new GuiWurstMainMenu());
         }
         else
         {
@@ -192,6 +197,10 @@ public class GuiGameOver extends GuiScreen implements GuiYesNoCallback
             {
                 guibutton.enabled = true;
             }
+            
+            //TODO: Client
+            WurstClient.INSTANCE.events.fireEvent(DeathEvent.class, new DeathEvent());
+            SpamProcessor.runScript("death", "Runs whenever you die.");
         }
     }
 }
diff --git a/src/net/minecraft/client/gui/GuiIngame.java b/src/net/minecraft/client/gui/GuiIngame.java
index 8c38552..6f0e7c2 100644
--- a/src/net/minecraft/client/gui/GuiIngame.java
+++ b/src/net/minecraft/client/gui/GuiIngame.java
@@ -4,9 +4,14 @@ import com.google.common.base.Predicate;
 import com.google.common.collect.Iterables;
 import com.google.common.collect.Lists;
 import com.google.common.collect.Ordering;
+
+import java.util.ArrayList;
 import java.util.Collection;
 import java.util.List;
 import java.util.Random;
+
+import tk.wurst_client.gui.UIRenderer;
+import tk.wurst_client.mods.ArenaBrawlMod;
 import net.minecraft.block.material.Material;
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.gui.inventory.GuiContainer;
@@ -341,10 +346,14 @@ public class GuiIngame extends Gui
 
         ScoreObjective scoreobjective1 = scoreobjective != null ? scoreobjective : scoreboard.getObjectiveInDisplaySlot(1);
 
-        if (scoreobjective1 != null)
+		// TODO: Client
+		if(scoreobjective1 != null)
         {
             this.renderScoreboard(scoreobjective1, scaledresolution);
-        }
+		}else
+			ArenaBrawlMod.scoreboard = null;
+		if(!this.mc.gameSettings.showDebugInfo)
+			UIRenderer.renderUI(zLevel);
 
         GlStateManager.enableBlend();
         GlStateManager.tryBlendFuncSeparate(GlStateManager.SourceFactor.SRC_ALPHA, GlStateManager.DestFactor.ONE_MINUS_SRC_ALPHA, GlStateManager.SourceFactor.ONE, GlStateManager.DestFactor.ZERO);
@@ -728,11 +737,18 @@ public class GuiIngame extends Gui
         int l1 = scaledRes.getScaledWidth() - i - k1;
         int j = 0;
 
+        //TODO: Client
+        ArrayList<String> wurst1 = new ArrayList<String>();
+
         for (Score score1 : collection)
         {
             ++j;
             ScorePlayerTeam scoreplayerteam1 = scoreboard.getPlayersTeam(score1.getPlayerName());
             String s1 = ScorePlayerTeam.formatPlayerName(scoreplayerteam1, score1.getPlayerName());
+            
+            //TODO: Client
+            wurst1.add(s1);
+            
             String s2 = TextFormatting.RED + "" + score1.getScorePoints();
             int k = j1 - j * this.getFontRenderer().FONT_HEIGHT;
             int l = scaledRes.getScaledWidth() - k1 + 2;
@@ -748,6 +764,9 @@ public class GuiIngame extends Gui
                 this.getFontRenderer().drawString(s3, l1 + i / 2 - this.getFontRenderer().getStringWidth(s3) / 2, k - this.getFontRenderer().FONT_HEIGHT, 553648127);
             }
         }
+        
+        //TODO: Client
+        ArenaBrawlMod.scoreboard = wurst1;
     }
 
     private void renderPlayerStats(ScaledResolution scaledRes)
diff --git a/src/net/minecraft/client/gui/GuiIngameMenu.java b/src/net/minecraft/client/gui/GuiIngameMenu.java
index b93bf8a..553ddd2 100644
--- a/src/net/minecraft/client/gui/GuiIngameMenu.java
+++ b/src/net/minecraft/client/gui/GuiIngameMenu.java
@@ -1,17 +1,34 @@
 package net.minecraft.client.gui;
 
+import static org.lwjgl.opengl.GL11.GL_CULL_FACE;
+import static org.lwjgl.opengl.GL11.GL_TEXTURE_2D;
+import static org.lwjgl.opengl.GL11.glEnable;
+
 import java.io.IOException;
+
+import org.lwjgl.opengl.GL11;
+
+import tk.wurst_client.gui.main.GuiWurstMainMenu;
+import tk.wurst_client.gui.options.GuiWurstOptions;
 import net.minecraft.client.gui.achievement.GuiAchievements;
 import net.minecraft.client.gui.achievement.GuiStats;
 import net.minecraft.client.multiplayer.WorldClient;
+import net.minecraft.client.renderer.OpenGlHelper;
+import net.minecraft.client.renderer.Tessellator;
+import net.minecraft.client.renderer.VertexBuffer;
 import net.minecraft.client.resources.I18n;
 import net.minecraft.realms.RealmsBridge;
+import net.minecraft.util.ResourceLocation;
 
 public class GuiIngameMenu extends GuiScreen
 {
     private int field_146445_a;
     private int field_146444_f;
     
+	// TODO: Client
+	private static final ResourceLocation wurstTextures = new ResourceLocation(
+		"wurst/wurst_128.png");
+
     /**
      * Adds the buttons (and other controls) to the screen in question. Called when the GUI is displayed and when the
      * window resizes, the buttonList is cleared beforehand.
@@ -31,6 +48,11 @@ public class GuiIngameMenu extends GuiScreen
 
         this.buttonList.add(new GuiButton(4, this.width / 2 - 100, this.height / 4 + 24 + i, I18n.format("menu.returnToGame", new Object[0])));
         this.buttonList.add(new GuiButton(0, this.width / 2 - 100, this.height / 4 + 96 + i, 98, 20, I18n.format("menu.options", new Object[0])));
+
+		// TODO: Client
+		this.buttonList.add(new GuiButton(8, this.width / 2 - 100, this.height
+			/ 4 + 72 + i, "            Options"));
+        
         GuiButton guibutton;
         this.buttonList.add(guibutton = new GuiButton(7, this.width / 2 + 2, this.height / 4 + 96 + i, 98, 20, I18n.format("menu.shareToLan", new Object[0])));
         this.buttonList.add(new GuiButton(5, this.width / 2 - 100, this.height / 4 + 48 + i, 98, 20, I18n.format("gui.achievements", new Object[0])));
@@ -58,16 +80,16 @@ public class GuiIngameMenu extends GuiScreen
 
                 if (flag)
                 {
-                    this.mc.displayGuiScreen(new GuiMainMenu());
+                    this.mc.displayGuiScreen(new GuiWurstMainMenu());
                 }
                 else if (flag1)
                 {
                     RealmsBridge realmsbridge = new RealmsBridge();
-                    realmsbridge.switchToRealms(new GuiMainMenu());
+                    realmsbridge.switchToRealms(new GuiWurstMainMenu());
                 }
                 else
                 {
-                    this.mc.displayGuiScreen(new GuiMultiplayer(new GuiMainMenu()));
+                    this.mc.displayGuiScreen(new GuiMultiplayer(new GuiWurstMainMenu()));
                 }
 
             case 2:
@@ -90,6 +112,10 @@ public class GuiIngameMenu extends GuiScreen
 
             case 7:
                 this.mc.displayGuiScreen(new GuiShareToLan(this));
+
+                //TODO: Client
+            case 8:
+                this.mc.displayGuiScreen(new GuiWurstOptions(this));
         }
     }
 
@@ -110,5 +136,23 @@ public class GuiIngameMenu extends GuiScreen
         this.drawDefaultBackground();
         this.drawCenteredString(this.fontRendererObj, I18n.format("menu.game", new Object[0]), this.width / 2, 40, 16777215);
         super.drawScreen(mouseX, mouseY, partialTicks);
+        
+        //TODO: Client
+		glEnable(GL_TEXTURE_2D);
+		glEnable(GL_CULL_FACE);
+        GL11.glDisable(GL11.GL_DEPTH_TEST);
+        GL11.glDepthMask(false);
+        OpenGlHelper.glBlendFunc(770, 771, 1, 0);
+        GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
+        this.mc.getTextureManager().bindTexture(wurstTextures);
+        int x = this.width / 2 - 68;
+        int y = this.height / 4 + 73 - 15;
+        int w = 63;
+        int h = 16;
+        float fw = 63;
+        float fh = 16;
+        float u = 0;
+        float v = 0;
+		Gui.drawModalRectWithCustomSizedTexture(x, y, u, v, w, h, fw, fh);
     }
 }
diff --git a/src/net/minecraft/client/gui/GuiListWorldSelectionEntry.java b/src/net/minecraft/client/gui/GuiListWorldSelectionEntry.java
index cf5b504..cc18322 100644
--- a/src/net/minecraft/client/gui/GuiListWorldSelectionEntry.java
+++ b/src/net/minecraft/client/gui/GuiListWorldSelectionEntry.java
@@ -238,7 +238,7 @@ public class GuiListWorldSelectionEntry implements GuiListExtended.IGuiListEntry
 
     private void func_186777_e()
     {
-        this.field_186784_e.getSoundHandler().playSound(PositionedSoundRecord.func_184371_a(SoundEvents.ui_button_click, 1.0F));
+        this.field_186784_e.getSoundHandler().playSound(PositionedSoundRecord.createPositionedSoundRecord(SoundEvents.ui_button_click, 1.0F));
 
         if (this.field_186784_e.getSaveLoader().canLoadWorld(this.field_186786_g.getFileName()))
         {
diff --git a/src/net/minecraft/client/gui/GuiMainMenu.java b/src/net/minecraft/client/gui/GuiMainMenu.java
index b8f0b51..cd27a1e 100644
--- a/src/net/minecraft/client/gui/GuiMainMenu.java
+++ b/src/net/minecraft/client/gui/GuiMainMenu.java
@@ -1,6 +1,7 @@
 package net.minecraft.client.gui;
 
 import com.google.common.collect.Lists;
+
 import java.io.BufferedReader;
 import java.io.Closeable;
 import java.io.IOException;
@@ -11,6 +12,7 @@ import java.util.Date;
 import java.util.List;
 import java.util.Random;
 import java.util.concurrent.atomic.AtomicInteger;
+
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.renderer.GlStateManager;
 import net.minecraft.client.renderer.OpenGlHelper;
@@ -28,6 +30,7 @@ import net.minecraft.util.text.TextFormatting;
 import net.minecraft.world.demo.DemoWorldServer;
 import net.minecraft.world.storage.ISaveFormat;
 import net.minecraft.world.storage.WorldInfo;
+
 import org.apache.commons.io.Charsets;
 import org.apache.commons.io.IOUtils;
 import org.apache.logging.log4j.LogManager;
@@ -35,6 +38,8 @@ import org.apache.logging.log4j.Logger;
 import org.lwjgl.opengl.GLContext;
 import org.lwjgl.util.glu.Project;
 
+import tk.wurst_client.hooks.ServerHook;
+
 public class GuiMainMenu extends GuiScreen implements GuiYesNoCallback
 {
     private static final AtomicInteger field_175373_f = new AtomicInteger(0);
@@ -45,7 +50,7 @@ public class GuiMainMenu extends GuiScreen implements GuiYesNoCallback
     private float updateCounter;
 
     /** The splash message. */
-    private String splashText;
+    public static String splashText;
     private GuiButton buttonResetDemo;
 
     /** Timer used to rotate the panorama, increases every tick. */
@@ -202,7 +207,13 @@ public class GuiMainMenu extends GuiScreen implements GuiYesNoCallback
         else if (calendar.get(2) + 1 == 10 && calendar.get(5) == 31)
         {
             this.splashText = "OOoooOOOoooo! Spooky!";
+            
+            //TODO: Client
+        }else if (calendar.get(2) + 1 == 2 && calendar.get(5) == 9)
+        {
+            this.splashText = "Happy birthday, Alexander01998!";
         }
+        ServerHook.setCurrentIpToSingleplayer();
 
         int i = 24;
         int j = this.height / 4 + 48;
@@ -254,7 +265,10 @@ public class GuiMainMenu extends GuiScreen implements GuiYesNoCallback
     {
         this.buttonList.add(new GuiButton(1, this.width / 2 - 100, p_73969_1_, I18n.format("menu.singleplayer", new Object[0])));
         this.buttonList.add(new GuiButton(2, this.width / 2 - 100, p_73969_1_ + p_73969_2_ * 1, I18n.format("menu.multiplayer", new Object[0])));
-        this.buttonList.add(this.realmsButton = new GuiButton(14, this.width / 2 - 100, p_73969_1_ + p_73969_2_ * 2, I18n.format("menu.online", new Object[0])));
+        
+        //TODO: Client
+        this.buttonList.add(new GuiButton(3, this.width / 2 + 2, p_73969_1_ + p_73969_2_ * 2, 98, 20, "Alt Manager"));
+        this.buttonList.add(this.realmsButton = new GuiButton(14, this.width / 2 - 100, p_73969_1_ + p_73969_2_ * 2, 98, 20, I18n.format("menu.online", new Object[0])));
     }
 
     /**
@@ -488,7 +502,7 @@ public class GuiMainMenu extends GuiScreen implements GuiYesNoCallback
     /**
      * Renders the skybox in the main menu
      */
-    private void renderSkybox(int p_73971_1_, int p_73971_2_, float p_73971_3_)
+    protected void renderSkybox(int p_73971_1_, int p_73971_2_, float p_73971_3_)
     {
         this.mc.getFramebuffer().unbindFramebuffer();
         GlStateManager.viewport(0, 0, 256, 256);
diff --git a/src/net/minecraft/client/gui/GuiMemoryErrorScreen.java b/src/net/minecraft/client/gui/GuiMemoryErrorScreen.java
index 77e3893..c302473 100644
--- a/src/net/minecraft/client/gui/GuiMemoryErrorScreen.java
+++ b/src/net/minecraft/client/gui/GuiMemoryErrorScreen.java
@@ -1,6 +1,8 @@
 package net.minecraft.client.gui;
 
 import java.io.IOException;
+
+import tk.wurst_client.gui.main.GuiWurstMainMenu;
 import net.minecraft.client.resources.I18n;
 
 public class GuiMemoryErrorScreen extends GuiScreen
@@ -23,7 +25,7 @@ public class GuiMemoryErrorScreen extends GuiScreen
     {
         if (button.id == 0)
         {
-            this.mc.displayGuiScreen(new GuiMainMenu());
+            this.mc.displayGuiScreen(new GuiWurstMainMenu());
         }
         else if (button.id == 1)
         {
diff --git a/src/net/minecraft/client/gui/GuiMultiplayer.java b/src/net/minecraft/client/gui/GuiMultiplayer.java
index e4e5eb7..8618bb1 100644
--- a/src/net/minecraft/client/gui/GuiMultiplayer.java
+++ b/src/net/minecraft/client/gui/GuiMultiplayer.java
@@ -2,25 +2,35 @@ package net.minecraft.client.gui;
 
 import com.google.common.base.Splitter;
 import com.google.common.collect.Lists;
+
 import java.io.IOException;
 import java.util.List;
+
 import net.minecraft.client.multiplayer.GuiConnecting;
 import net.minecraft.client.multiplayer.ServerData;
 import net.minecraft.client.multiplayer.ServerList;
 import net.minecraft.client.network.LanServerDetector;
 import net.minecraft.client.network.ServerPinger;
 import net.minecraft.client.resources.I18n;
+
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.lwjgl.input.Keyboard;
 
+import tk.wurst_client.WurstClient;
+import tk.wurst_client.gui.multiplayer.GuiCleanUp;
+import tk.wurst_client.gui.multiplayer.GuiServerFinder;
+import tk.wurst_client.gui.multiplayer.GuiUseProxy;
+import tk.wurst_client.hooks.ServerHook;
+import tk.wurst_client.spam.SpamProcessor;
+
 public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
 {
     private static final Logger logger = LogManager.getLogger();
     private final ServerPinger oldServerPinger = new ServerPinger();
     private GuiScreen parentScreen;
-    private ServerSelectionList serverListSelector;
-    private ServerList savedServerList;
+    public ServerSelectionList serverListSelector;
+    public ServerList savedServerList;
     private GuiButton btnEditServer;
     private GuiButton btnSelectServer;
     private GuiButton btnDeleteServer;
@@ -78,6 +88,9 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
         }
 
         this.createButtons();
+        
+        //TODO: Client
+        WurstClient.INSTANCE.analytics.trackPageView("/multiplayer", "Select Server");
     }
 
     /**
@@ -86,6 +99,9 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
     public void handleMouseInput() throws IOException
     {
         super.handleMouseInput();
+        
+        //TODO: Client
+        if(serverListSelector != null)
         this.serverListSelector.handleMouseInput();
     }
 
@@ -98,7 +114,16 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
         this.buttonList.add(new GuiButton(3, this.width / 2 + 4 + 50, this.height - 52, 100, 20, I18n.format("selectServer.add", new Object[0])));
         this.buttonList.add(new GuiButton(8, this.width / 2 + 4, this.height - 28, 70, 20, I18n.format("selectServer.refresh", new Object[0])));
         this.buttonList.add(new GuiButton(0, this.width / 2 + 4 + 76, this.height - 28, 75, 20, I18n.format("gui.cancel", new Object[0])));
-        this.selectServer(this.serverListSelector.func_148193_k());
+        
+        //TODO: Client
+        this.buttonList.add(new GuiButton(5, this.width / 2 - 154, 10, 100, 20, "Last server"));
+        this.buttonList.add(new GuiButton(6, this.width / 2 + 54, 10, 100, 20, "Use Proxy"));
+        this.buttonList.add(new GuiButton(10, this.width / 2 - 154 - 104, this.height - 52, 100, 20, "Import Servers"));
+        this.buttonList.add(new GuiButton(11, this.width / 2 - 154 - 104, this.height - 28, 100, 20, "Export Servers"));
+        this.buttonList.add(new GuiButton(12, this.width / 2 + 154 + 4, this.height - 52, 100, 20, "Server Finder"));
+        this.buttonList.add(new GuiButton(13, this.width / 2 + 154 + 4, this.height - 28, 100, 20, "Clean Up"));
+        
+        this.selectServer(this.serverListSelector.getSelectedServer());
     }
 
     /**
@@ -116,6 +141,11 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
         }
 
         this.oldServerPinger.pingPendingNetworks();
+        
+		// TODO: Client
+		// Enable/disable "Last Server" button
+		((GuiButton)this.buttonList.get(7)).enabled =
+			ServerHook.hasLastServer();
     }
 
     /**
@@ -141,7 +171,7 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
     {
         if (button.enabled)
         {
-            GuiListExtended.IGuiListEntry guilistextended$iguilistentry = this.serverListSelector.func_148193_k() < 0 ? null : this.serverListSelector.getListEntry(this.serverListSelector.func_148193_k());
+            GuiListExtended.IGuiListEntry guilistextended$iguilistentry = this.serverListSelector.getSelectedServer() < 0 ? null : this.serverListSelector.getListEntry(this.serverListSelector.getSelectedServer());
 
             if (button.id == 2 && guilistextended$iguilistentry instanceof ServerListEntryNormal)
             {
@@ -154,7 +184,7 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
                     String s1 = "\'" + s4 + "\' " + I18n.format("selectServer.deleteWarning", new Object[0]);
                     String s2 = I18n.format("selectServer.deleteButton", new Object[0]);
                     String s3 = I18n.format("gui.cancel", new Object[0]);
-                    GuiYesNo guiyesno = new GuiYesNo(this, s, s1, s2, s3, this.serverListSelector.func_148193_k());
+                    GuiYesNo guiyesno = new GuiYesNo(this, s, s1, s2, s3, this.serverListSelector.getSelectedServer());
                     this.mc.displayGuiScreen(guiyesno);
                 }
             }
@@ -187,18 +217,39 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
             else if (button.id == 8)
             {
                 this.refreshServerList();
-            }
-        }
-    }
 
-    private void refreshServerList()
+				// TODO: Client
+			}else if(button.id == 5)
+			{// Last Server
+				ServerHook.joinLastServer(this);
+			}else if(button.id == 6)
+				// Use Proxy
+				mc.displayGuiScreen(new GuiUseProxy(this));
+			else if(button.id == 10)
+				// Import
+				new Thread(() -> ServerHook.importServers(GuiMultiplayer.this))
+					.start();
+			else if(button.id == 11)
+				// Export
+				new Thread(() -> ServerHook.exportServers(GuiMultiplayer.this))
+					.start();
+			else if(button.id == 12)
+				// Server Finder
+				mc.displayGuiScreen(new GuiServerFinder(this));
+			else if(button.id == 13)
+				// Clean Up
+				mc.displayGuiScreen(new GuiCleanUp(this));
+        }
+    }
+
+    public void refreshServerList()
     {
         this.mc.displayGuiScreen(new GuiMultiplayer(this.parentScreen));
     }
 
     public void confirmClicked(boolean result, int id)
     {
-        GuiListExtended.IGuiListEntry guilistextended$iguilistentry = this.serverListSelector.func_148193_k() < 0 ? null : this.serverListSelector.getListEntry(this.serverListSelector.func_148193_k());
+        GuiListExtended.IGuiListEntry guilistextended$iguilistentry = this.serverListSelector.getSelectedServer() < 0 ? null : this.serverListSelector.getListEntry(this.serverListSelector.getSelectedServer());
 
         if (this.deletingServer)
         {
@@ -206,7 +257,7 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
 
             if (result && guilistextended$iguilistentry instanceof ServerListEntryNormal)
             {
-                this.savedServerList.removeServerData(this.serverListSelector.func_148193_k());
+                this.savedServerList.removeServerData(this.serverListSelector.getSelectedServer());
                 this.savedServerList.saveServerList();
                 this.serverListSelector.setSelectedSlotIndex(-1);
                 this.serverListSelector.func_148195_a(this.savedServerList);
@@ -265,7 +316,7 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
      */
     protected void keyTyped(char typedChar, int keyCode) throws IOException
     {
-        int i = this.serverListSelector.func_148193_k();
+        int i = this.serverListSelector.getSelectedServer();
         GuiListExtended.IGuiListEntry guilistextended$iguilistentry = i < 0 ? null : this.serverListSelector.getListEntry(i);
 
         if (keyCode == 63)
@@ -283,19 +334,19 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
                         if (i > 0 && guilistextended$iguilistentry instanceof ServerListEntryNormal)
                         {
                             this.savedServerList.swapServers(i, i - 1);
-                            this.selectServer(this.serverListSelector.func_148193_k() - 1);
+                            this.selectServer(this.serverListSelector.getSelectedServer() - 1);
                             this.serverListSelector.scrollBy(-this.serverListSelector.getSlotHeight());
                             this.serverListSelector.func_148195_a(this.savedServerList);
                         }
                     }
                     else if (i > 0)
                     {
-                        this.selectServer(this.serverListSelector.func_148193_k() - 1);
+                        this.selectServer(this.serverListSelector.getSelectedServer() - 1);
                         this.serverListSelector.scrollBy(-this.serverListSelector.getSlotHeight());
 
-                        if (this.serverListSelector.getListEntry(this.serverListSelector.func_148193_k()) instanceof ServerListEntryLanScan)
+                        if (this.serverListSelector.getListEntry(this.serverListSelector.getSelectedServer()) instanceof ServerListEntryLanScan)
                         {
-                            if (this.serverListSelector.func_148193_k() > 0)
+                            if (this.serverListSelector.getSelectedServer() > 0)
                             {
                                 this.selectServer(this.serverListSelector.getSize() - 1);
                                 this.serverListSelector.scrollBy(-this.serverListSelector.getSlotHeight());
@@ -325,12 +376,12 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
                     }
                     else if (i < this.serverListSelector.getSize())
                     {
-                        this.selectServer(this.serverListSelector.func_148193_k() + 1);
+                        this.selectServer(this.serverListSelector.getSelectedServer() + 1);
                         this.serverListSelector.scrollBy(this.serverListSelector.getSlotHeight());
 
-                        if (this.serverListSelector.getListEntry(this.serverListSelector.func_148193_k()) instanceof ServerListEntryLanScan)
+                        if (this.serverListSelector.getListEntry(this.serverListSelector.getSelectedServer()) instanceof ServerListEntryLanScan)
                         {
-                            if (this.serverListSelector.func_148193_k() < this.serverListSelector.getSize() - 1)
+                            if (this.serverListSelector.getSelectedServer() < this.serverListSelector.getSize() - 1)
                             {
                                 this.selectServer(this.serverListSelector.getSize() + 1);
                                 this.serverListSelector.scrollBy(this.serverListSelector.getSlotHeight());
@@ -370,7 +421,10 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
         this.hoveringText = null;
         this.drawDefaultBackground();
         this.serverListSelector.drawScreen(mouseX, mouseY, partialTicks);
-        this.drawCenteredString(this.fontRendererObj, I18n.format("multiplayer.title", new Object[0]), this.width / 2, 20, 16777215);
+        
+        //TODO: Client
+        this.drawCenteredString(this.fontRendererObj, I18n.format("multiplayer.title", new Object[0]), this.width / 2, 16, 16777215);
+        
         super.drawScreen(mouseX, mouseY, partialTicks);
 
         if (this.hoveringText != null)
@@ -381,7 +435,10 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
 
     public void connectToSelected()
     {
-        GuiListExtended.IGuiListEntry guilistextended$iguilistentry = this.serverListSelector.func_148193_k() < 0 ? null : this.serverListSelector.getListEntry(this.serverListSelector.func_148193_k());
+        GuiListExtended.IGuiListEntry guilistextended$iguilistentry = this.serverListSelector.getSelectedServer() < 0 ? null : this.serverListSelector.getListEntry(this.serverListSelector.getSelectedServer());
+
+        //TODO: Client
+        ServerHook.updateLastServerFromServerlist(guilistextended$iguilistentry, this);
 
         if (guilistextended$iguilistentry instanceof ServerListEntryNormal)
         {
@@ -394,9 +451,13 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
         }
     }
 
-    private void connectToServer(ServerData server)
+    public void connectToServer(ServerData server)
     {
         this.mc.displayGuiScreen(new GuiConnecting(this, this.mc, server));
+        
+        //TODO: Client
+        SpamProcessor.runScript("joinserver", "Runs whenever you join a server.");
+		WurstClient.INSTANCE.analytics.trackPageView("/play/multiplayer", "Multiplayer");
     }
 
     public void selectServer(int index)
@@ -467,7 +528,7 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
         int i = p_175391_3_ ? 0 : p_175391_2_ - 1;
         this.savedServerList.swapServers(p_175391_2_, i);
 
-        if (this.serverListSelector.func_148193_k() == p_175391_2_)
+        if (this.serverListSelector.getSelectedServer() == p_175391_2_)
         {
             this.selectServer(i);
         }
@@ -480,7 +541,7 @@ public class GuiMultiplayer extends GuiScreen implements GuiYesNoCallback
         int i = p_175393_3_ ? this.savedServerList.countServers() - 1 : p_175393_2_ + 1;
         this.savedServerList.swapServers(p_175393_2_, i);
 
-        if (this.serverListSelector.func_148193_k() == p_175393_2_)
+        if (this.serverListSelector.getSelectedServer() == p_175393_2_)
         {
             this.selectServer(i);
         }
diff --git a/src/net/minecraft/client/gui/GuiNewChat.java b/src/net/minecraft/client/gui/GuiNewChat.java
index b43a7c5..f5ca79d 100644
--- a/src/net/minecraft/client/gui/GuiNewChat.java
+++ b/src/net/minecraft/client/gui/GuiNewChat.java
@@ -3,17 +3,23 @@ package net.minecraft.client.gui;
 import com.google.common.base.Joiner;
 import com.google.common.base.Splitter;
 import com.google.common.collect.Lists;
+
 import java.util.Iterator;
 import java.util.List;
+
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.renderer.GlStateManager;
 import net.minecraft.entity.player.EntityPlayer;
 import net.minecraft.util.math.MathHelper;
 import net.minecraft.util.text.ITextComponent;
 import net.minecraft.util.text.TextComponentString;
+
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 
+import tk.wurst_client.WurstClient;
+import tk.wurst_client.events.ChatInputEvent;
+
 public class GuiNewChat extends Gui
 {
     private static final Splitter field_184061_a = Splitter.on('\n');
@@ -137,6 +143,13 @@ public class GuiNewChat extends Gui
      */
     public void printChatMessageWithOptionalDeletion(ITextComponent chatComponent, int chatLineId)
     {
+    	//TODO: Client
+    	ChatInputEvent event = new ChatInputEvent(chatComponent, drawnChatLines);
+    	WurstClient.INSTANCE.events.fireEvent(ChatInputEvent.class, event);
+    	if(event.isCancelled())
+    		return;
+    	chatComponent = event.getComponent();
+    	
         this.setChatLine(chatComponent, chatLineId, this.mc.ingameGUI.getUpdateCounter(), false);
         logger.info("[CHAT] " + field_184062_f.join(field_184061_a.split(chatComponent.getUnformattedText())));
     }
diff --git a/src/net/minecraft/client/gui/GuiScreenBook.java b/src/net/minecraft/client/gui/GuiScreenBook.java
index 884aeb0..6aa6df0 100644
--- a/src/net/minecraft/client/gui/GuiScreenBook.java
+++ b/src/net/minecraft/client/gui/GuiScreenBook.java
@@ -1,10 +1,10 @@
 package net.minecraft.client.gui;
 
-import com.google.common.collect.Lists;
-import com.google.gson.JsonParseException;
 import io.netty.buffer.Unpooled;
+
 import java.io.IOException;
 import java.util.List;
+
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.renderer.GlStateManager;
 import net.minecraft.client.resources.I18n;
@@ -19,13 +19,20 @@ import net.minecraft.network.play.client.CPacketCustomPayload;
 import net.minecraft.util.ChatAllowedCharacters;
 import net.minecraft.util.ResourceLocation;
 import net.minecraft.util.text.ITextComponent;
+import net.minecraft.util.text.Style;
 import net.minecraft.util.text.TextComponentString;
 import net.minecraft.util.text.TextFormatting;
 import net.minecraft.util.text.event.ClickEvent;
+
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.lwjgl.input.Keyboard;
 
+import tk.wurst_client.gui.mods.GuiBookHack;
+
+import com.google.common.collect.Lists;
+import com.google.gson.JsonParseException;
+
 public class GuiScreenBook extends GuiScreen
 {
     private static final Logger logger = LogManager.getLogger();
@@ -65,6 +72,10 @@ public class GuiScreenBook extends GuiScreen
     private GuiButton buttonFinalize;
     private GuiButton buttonCancel;
 
+    //TODO: Client
+    private boolean hasCommand;
+    private String command;
+
     public GuiScreenBook(EntityPlayer player, ItemStack book, boolean isUnsigned)
     {
         this.editingPlayer = player;
@@ -120,6 +131,9 @@ public class GuiScreenBook extends GuiScreen
             this.buttonList.add(this.buttonDone = new GuiButton(0, this.width / 2 + 2, 4 + this.bookImageHeight, 98, 20, I18n.format("gui.done", new Object[0])));
             this.buttonList.add(this.buttonFinalize = new GuiButton(5, this.width / 2 - 100, 4 + this.bookImageHeight, 98, 20, I18n.format("book.finalizeButton", new Object[0])));
             this.buttonList.add(this.buttonCancel = new GuiButton(4, this.width / 2 + 2, 4 + this.bookImageHeight, 98, 20, I18n.format("gui.cancel", new Object[0])));
+            
+            //TODO: Client
+            this.buttonList.add(new GuiButton(6, (width + bookImageWidth) / 2, bookImageHeight / 2, 100, 20, "Command Link"));
         }
         else
         {
@@ -153,6 +167,11 @@ public class GuiScreenBook extends GuiScreen
             this.buttonCancel.visible = this.bookGettingSigned;
             this.buttonFinalize.visible = this.bookGettingSigned;
             this.buttonFinalize.enabled = !this.bookTitle.trim().isEmpty();
+            
+            //TODO: Client
+            GuiButton buttonCommandLink = (GuiButton)buttonList.get(4);
+            buttonCommandLink.visible = bookGettingSigned;
+            buttonCommandLink.enabled = buttonFinalize.enabled;
         }
     }
 
@@ -191,6 +210,36 @@ public class GuiScreenBook extends GuiScreen
                     s1 = "MC|BSign";
                     this.bookObj.setTagInfo("author", new NBTTagString(this.editingPlayer.getName()));
                     this.bookObj.setTagInfo("title", new NBTTagString(this.bookTitle.trim()));
+                    
+					// TODO: Client
+					if(hasCommand)
+						try
+						{
+							NBTTagList pages =
+								bookObj.getTagCompound().getTagList("pages", 8);
+							for(int page = 0; page < pages.tagCount(); page++)
+							{
+								String text = pages.getStringTagAt(page);
+								text = text.substring(1, text.length() - 1);
+								TextComponentString component =
+									new TextComponentString(text);
+								component
+									.setChatStyle(new Style())
+									.getChatStyle()
+									.setChatClickEvent(
+										new ClickEvent(
+											ClickEvent.Action.RUN_COMMAND,
+											command));
+								text =
+									ITextComponent.Serializer
+										.componentToJson(component);
+								pages.set(page, new NBTTagString(text));
+							}
+							System.out.println(bookObj.getTagCompound());
+						}catch(Exception e)
+						{
+							e.printStackTrace();
+						}
                 }
 
                 PacketBuffer packetbuffer = new PacketBuffer(Unpooled.buffer());
@@ -247,12 +296,32 @@ public class GuiScreenBook extends GuiScreen
             else if (button.id == 4 && this.bookGettingSigned)
             {
                 this.bookGettingSigned = false;
+                
+                //TODO: Client
+            }else if(button.id == 6)
+			{
+            	mc.displayGuiScreen(new GuiBookHack(this));
             }
 
             this.updateButtons();
         }
     }
 
+    //TODO: Client
+	public void signWithCommand(String command)
+	{
+		try
+		{
+			this.command = command;
+			hasCommand = true;
+			sendBookToServer(true);
+			this.mc.displayGuiScreen((GuiScreen)null);
+		}catch(Exception e)
+		{
+			e.printStackTrace();
+		}
+	}
+
 	private void addNewPage()
     {
         if (this.bookPages != null && this.bookPages.tagCount() < 50)
diff --git a/src/net/minecraft/client/gui/GuiScreenOptionsSounds.java b/src/net/minecraft/client/gui/GuiScreenOptionsSounds.java
index 9f8af59..9b31dc9 100644
--- a/src/net/minecraft/client/gui/GuiScreenOptionsSounds.java
+++ b/src/net/minecraft/client/gui/GuiScreenOptionsSounds.java
@@ -157,7 +157,7 @@ public class GuiScreenOptionsSounds extends GuiScreen
         {
             if (this.field_146155_p)
             {
-                GuiScreenOptionsSounds.this.mc.getSoundHandler().playSound(PositionedSoundRecord.func_184371_a(SoundEvents.ui_button_click, 1.0F));
+                GuiScreenOptionsSounds.this.mc.getSoundHandler().playSound(PositionedSoundRecord.createPositionedSoundRecord(SoundEvents.ui_button_click, 1.0F));
             }
 
             this.field_146155_p = false;
diff --git a/src/net/minecraft/client/gui/GuiScreenServerList.java b/src/net/minecraft/client/gui/GuiScreenServerList.java
index 6ef9c81..b0f016a 100644
--- a/src/net/minecraft/client/gui/GuiScreenServerList.java
+++ b/src/net/minecraft/client/gui/GuiScreenServerList.java
@@ -1,10 +1,14 @@
 package net.minecraft.client.gui;
 
 import java.io.IOException;
+
 import net.minecraft.client.multiplayer.ServerData;
 import net.minecraft.client.resources.I18n;
+
 import org.lwjgl.input.Keyboard;
 
+import tk.wurst_client.hooks.ServerHook;
+
 public class GuiScreenServerList extends GuiScreen
 {
     private final GuiScreen field_146303_a;
@@ -66,6 +70,11 @@ public class GuiScreenServerList extends GuiScreen
             else if (button.id == 0)
             {
                 this.field_146301_f.serverIP = this.field_146302_g.getText();
+                
+				// TODO: Client
+				ServerHook.updateLastServerFromDirectConnect(
+					(GuiMultiplayer)field_146303_a, field_146301_f);
+				
                 this.field_146303_a.confirmClicked(true, 0);
             }
         }
diff --git a/src/net/minecraft/client/gui/ServerListEntryNormal.java b/src/net/minecraft/client/gui/ServerListEntryNormal.java
index f4982df..9eb3ec5 100644
--- a/src/net/minecraft/client/gui/ServerListEntryNormal.java
+++ b/src/net/minecraft/client/gui/ServerListEntryNormal.java
@@ -2,15 +2,18 @@ package net.minecraft.client.gui;
 
 import com.google.common.base.Charsets;
 import com.google.common.util.concurrent.ThreadFactoryBuilder;
+
 import io.netty.buffer.ByteBuf;
 import io.netty.buffer.ByteBufInputStream;
 import io.netty.buffer.Unpooled;
 import io.netty.handler.codec.base64.Base64;
+
 import java.awt.image.BufferedImage;
 import java.net.UnknownHostException;
 import java.util.List;
 import java.util.concurrent.ScheduledThreadPoolExecutor;
 import java.util.concurrent.ThreadPoolExecutor;
+
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.multiplayer.ServerData;
 import net.minecraft.client.renderer.GlStateManager;
@@ -18,6 +21,7 @@ import net.minecraft.client.renderer.texture.DynamicTexture;
 import net.minecraft.client.renderer.texture.TextureUtil;
 import net.minecraft.util.ResourceLocation;
 import net.minecraft.util.text.TextFormatting;
+
 import org.apache.commons.lang3.Validate;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
@@ -36,7 +40,7 @@ public class ServerListEntryNormal implements GuiListExtended.IGuiListEntry
     private DynamicTexture field_148305_h;
     private long field_148298_f;
 
-    protected ServerListEntryNormal(GuiMultiplayer p_i45048_1_, ServerData serverIn)
+    public ServerListEntryNormal(GuiMultiplayer p_i45048_1_, ServerData serverIn)
     {
         this.owner = p_i45048_1_;
         this.server = serverIn;
@@ -86,7 +90,12 @@ public class ServerListEntryNormal implements GuiListExtended.IGuiListEntry
             this.mc.fontRendererObj.drawString((String)list.get(i), x + 32 + 3, y + 12 + this.mc.fontRendererObj.FONT_HEIGHT * i, 8421504);
         }
 
-        String s2 = flag2 ? TextFormatting.DARK_RED + this.server.gameVersion : this.server.populationInfo;
+		// TODO: Client
+		String s2 =
+			flag2 ? TextFormatting.DARK_RED + this.server.gameVersion
+				: TextFormatting.GREEN + server.gameVersion
+					+ TextFormatting.RESET + " " + this.server.populationInfo;
+		
         int j = this.mc.fontRendererObj.getStringWidth(s2);
         this.mc.fontRendererObj.drawString(s2, x + listWidth - j - 15 - 2, y + 1, 8421504);
         int k = 0;
diff --git a/src/net/minecraft/client/gui/ServerSelectionList.java b/src/net/minecraft/client/gui/ServerSelectionList.java
index d7c9b83..5d605df 100644
--- a/src/net/minecraft/client/gui/ServerSelectionList.java
+++ b/src/net/minecraft/client/gui/ServerSelectionList.java
@@ -63,7 +63,7 @@ public class ServerSelectionList extends GuiListExtended
         return slotIndex == this.selectedSlotIndex;
     }
 
-    public int func_148193_k()
+    public int getSelectedServer()
     {
         return this.selectedSlotIndex;
     }
diff --git a/src/net/minecraft/client/gui/achievement/GuiStats.java b/src/net/minecraft/client/gui/achievement/GuiStats.java
index f14be3e..8c3ed3f 100644
--- a/src/net/minecraft/client/gui/achievement/GuiStats.java
+++ b/src/net/minecraft/client/gui/achievement/GuiStats.java
@@ -373,7 +373,7 @@ public class GuiStats extends GuiScreen implements IProgressMeter
             if (this.field_148218_l >= 0)
             {
                 this.func_148212_h(this.field_148218_l);
-                this.mc.getSoundHandler().playSound(PositionedSoundRecord.func_184371_a(SoundEvents.ui_button_click, 1.0F));
+                this.mc.getSoundHandler().playSound(PositionedSoundRecord.createPositionedSoundRecord(SoundEvents.ui_button_click, 1.0F));
             }
         }
 
diff --git a/src/net/minecraft/client/gui/inventory/GuiChest.java b/src/net/minecraft/client/gui/inventory/GuiChest.java
index b01af09..563049b 100644
--- a/src/net/minecraft/client/gui/inventory/GuiChest.java
+++ b/src/net/minecraft/client/gui/inventory/GuiChest.java
@@ -1,9 +1,13 @@
 package net.minecraft.client.gui.inventory;
 
+import tk.wurst_client.WurstClient;
 import net.minecraft.client.Minecraft;
+import net.minecraft.client.gui.GuiButton;
 import net.minecraft.client.renderer.GlStateManager;
+import net.minecraft.inventory.ClickType;
 import net.minecraft.inventory.ContainerChest;
 import net.minecraft.inventory.IInventory;
+import net.minecraft.inventory.Slot;
 import net.minecraft.util.ResourceLocation;
 
 public class GuiChest extends GuiContainer
@@ -30,6 +34,75 @@ public class GuiChest extends GuiContainer
         this.ySize = j + this.inventoryRows * 18;
     }
 
+	// TODO: Client
+	@Override
+	public void initGui()
+	{
+		super.initGui();
+		buttonList.add(new GuiButton(0, guiLeft + xSize - 108, guiTop + 4, 50,
+			12, "Steal"));
+		buttonList.add(new GuiButton(1, guiLeft + xSize - 56, guiTop + 4, 50,
+			12, "Store"));
+		if(WurstClient.INSTANCE.mods.autoStealMod.isActive())
+			actionPerformed((GuiButton)buttonList.get(0));
+	}
+
+	// TODO: Client
+	@Override
+	protected void actionPerformed(GuiButton button)
+	{
+		if(button.id == 0)// Steal
+			new Thread(new Runnable()
+			{
+				@Override
+				public void run()
+				{
+					try
+					{
+						for(int i = 0; i < inventoryRows * 9; i++)
+						{
+							Slot slot =
+								(Slot)inventorySlots.inventorySlots.get(i);
+							if(slot.getStack() == null)
+								continue;
+							if(WurstClient.INSTANCE.mods.yesCheatMod
+								.isActive())
+								Thread.sleep(250);
+							handleMouseClick(slot, slot.slotNumber, 0, ClickType.QUICK_MOVE);
+						}
+					}catch(Exception e)
+					{
+						e.printStackTrace();
+					}
+				}
+			}).start();
+		else if(button.id == 1)// Store
+			new Thread(new Runnable()
+			{
+				@Override
+				public void run()
+				{
+					try
+					{
+						for(int i = inventoryRows * 9; i < inventoryRows * 9 + 44; i++)
+						{
+							Slot slot =
+								(Slot)inventorySlots.inventorySlots.get(i);
+							if(slot.getStack() == null)
+								continue;
+							if(WurstClient.INSTANCE.mods.yesCheatMod
+								.isActive())
+								Thread.sleep(250);
+							handleMouseClick(slot, slot.slotNumber, 0, ClickType.QUICK_MOVE);
+						}
+					}catch(Exception e)
+					{
+						e.printStackTrace();
+					}
+				}
+			}).start();
+    }
+
     /**
      * Draw the foreground layer for the GuiContainer (everything in front of the items). Args : mouseX, mouseY
      */
diff --git a/src/net/minecraft/client/gui/inventory/GuiContainer.java b/src/net/minecraft/client/gui/inventory/GuiContainer.java
index c1a2665..c4057a4 100644
--- a/src/net/minecraft/client/gui/inventory/GuiContainer.java
+++ b/src/net/minecraft/client/gui/inventory/GuiContainer.java
@@ -410,7 +410,7 @@ public abstract class GuiContainer extends GuiScreen
                     {
                         if (mouseButton == this.mc.gameSettings.keyBindPickBlock.getKeyCode() + 100)
                         {
-                            this.func_184098_a(slot, l, mouseButton, ClickType.CLONE);
+                            this.handleMouseClick(slot, l, mouseButton, ClickType.CLONE);
                         }
                         else
                         {
@@ -427,7 +427,7 @@ public abstract class GuiContainer extends GuiScreen
                                 clicktype = ClickType.THROW;
                             }
 
-                            this.func_184098_a(slot, l, mouseButton, clicktype);
+                            this.handleMouseClick(slot, l, mouseButton, clicktype);
                         }
 
                         this.ignoreMouseUp = true;
@@ -488,9 +488,9 @@ public abstract class GuiContainer extends GuiScreen
                     {
                         if (i - this.dragItemDropDelay > 500L)
                         {
-                            this.func_184098_a(this.clickedSlot, this.clickedSlot.slotNumber, 0, ClickType.PICKUP);
-                            this.func_184098_a(slot, slot.slotNumber, 1, ClickType.PICKUP);
-                            this.func_184098_a(this.clickedSlot, this.clickedSlot.slotNumber, 0, ClickType.PICKUP);
+                            this.handleMouseClick(this.clickedSlot, this.clickedSlot.slotNumber, 0, ClickType.PICKUP);
+                            this.handleMouseClick(slot, slot.slotNumber, 1, ClickType.PICKUP);
+                            this.handleMouseClick(this.clickedSlot, this.clickedSlot.slotNumber, 0, ClickType.PICKUP);
                             this.dragItemDropDelay = i + 750L;
                             --this.draggedStack.stackSize;
                         }
@@ -541,14 +541,14 @@ public abstract class GuiContainer extends GuiScreen
                     {
                         if (slot2 != null && slot2.canTakeStack(this.mc.thePlayer) && slot2.getHasStack() && slot2.inventory == slot.inventory && Container.canAddItemToSlot(slot2, this.shiftClickedSlot, true))
                         {
-                            this.func_184098_a(slot2, slot2.slotNumber, state, ClickType.QUICK_MOVE);
+                            this.handleMouseClick(slot2, slot2.slotNumber, state, ClickType.QUICK_MOVE);
                         }
                     }
                 }
             }
             else
             {
-                this.func_184098_a(slot, k, state, ClickType.PICKUP_ALL);
+                this.handleMouseClick(slot, k, state, ClickType.PICKUP_ALL);
             }
 
             this.doubleClick = false;
@@ -583,12 +583,12 @@ public abstract class GuiContainer extends GuiScreen
 
                     if (k != -1 && this.draggedStack != null && flag2)
                     {
-                        this.func_184098_a(this.clickedSlot, this.clickedSlot.slotNumber, state, ClickType.PICKUP);
-                        this.func_184098_a(slot, k, 0, ClickType.PICKUP);
+                        this.handleMouseClick(this.clickedSlot, this.clickedSlot.slotNumber, state, ClickType.PICKUP);
+                        this.handleMouseClick(slot, k, 0, ClickType.PICKUP);
 
                         if (this.mc.thePlayer.inventory.getItemStack() != null)
                         {
-                            this.func_184098_a(this.clickedSlot, this.clickedSlot.slotNumber, state, ClickType.PICKUP);
+                            this.handleMouseClick(this.clickedSlot, this.clickedSlot.slotNumber, state, ClickType.PICKUP);
                             this.touchUpX = mouseX - i;
                             this.touchUpY = mouseY - j;
                             this.returningStackDestSlot = this.clickedSlot;
@@ -615,20 +615,20 @@ public abstract class GuiContainer extends GuiScreen
             }
             else if (this.dragSplitting && !this.dragSplittingSlots.isEmpty())
             {
-                this.func_184098_a((Slot)null, -999, Container.func_94534_d(0, this.dragSplittingLimit), ClickType.QUICK_CRAFT);
+                this.handleMouseClick((Slot)null, -999, Container.func_94534_d(0, this.dragSplittingLimit), ClickType.QUICK_CRAFT);
 
                 for (Slot slot1 : this.dragSplittingSlots)
                 {
-                    this.func_184098_a(slot1, slot1.slotNumber, Container.func_94534_d(1, this.dragSplittingLimit), ClickType.QUICK_CRAFT);
+                    this.handleMouseClick(slot1, slot1.slotNumber, Container.func_94534_d(1, this.dragSplittingLimit), ClickType.QUICK_CRAFT);
                 }
 
-                this.func_184098_a((Slot)null, -999, Container.func_94534_d(2, this.dragSplittingLimit), ClickType.QUICK_CRAFT);
+                this.handleMouseClick((Slot)null, -999, Container.func_94534_d(2, this.dragSplittingLimit), ClickType.QUICK_CRAFT);
             }
             else if (this.mc.thePlayer.inventory.getItemStack() != null)
             {
                 if (state == this.mc.gameSettings.keyBindPickBlock.getKeyCode() + 100)
                 {
-                    this.func_184098_a(slot, k, state, ClickType.CLONE);
+                    this.handleMouseClick(slot, k, state, ClickType.CLONE);
                 }
                 else
                 {
@@ -639,7 +639,7 @@ public abstract class GuiContainer extends GuiScreen
                         this.shiftClickedSlot = slot != null && slot.getHasStack() ? slot.getStack() : null;
                     }
 
-                    this.func_184098_a(slot, k, state, flag1 ? ClickType.QUICK_MOVE : ClickType.PICKUP);
+                    this.handleMouseClick(slot, k, state, flag1 ? ClickType.QUICK_MOVE : ClickType.PICKUP);
                 }
             }
         }
@@ -673,14 +673,14 @@ public abstract class GuiContainer extends GuiScreen
         return pointX >= left - 1 && pointX < left + right + 1 && pointY >= top - 1 && pointY < top + bottom + 1;
     }
 
-    protected void func_184098_a(Slot p_184098_1_, int p_184098_2_, int p_184098_3_, ClickType p_184098_4_)
+    protected void handleMouseClick(Slot p_184098_1_, int p_184098_2_, int p_184098_3_, ClickType p_184098_4_)
     {
         if (p_184098_1_ != null)
         {
             p_184098_2_ = p_184098_1_.slotNumber;
         }
 
-        this.mc.playerController.func_187098_a(this.inventorySlots.windowId, p_184098_2_, p_184098_3_, p_184098_4_, this.mc.thePlayer);
+        this.mc.playerController.windowClick(this.inventorySlots.windowId, p_184098_2_, p_184098_3_, p_184098_4_, this.mc.thePlayer);
     }
 
     /**
@@ -700,11 +700,11 @@ public abstract class GuiContainer extends GuiScreen
         {
             if (keyCode == this.mc.gameSettings.keyBindPickBlock.getKeyCode())
             {
-                this.func_184098_a(this.theSlot, this.theSlot.slotNumber, 0, ClickType.CLONE);
+                this.handleMouseClick(this.theSlot, this.theSlot.slotNumber, 0, ClickType.CLONE);
             }
             else if (keyCode == this.mc.gameSettings.keyBindDrop.getKeyCode())
             {
-                this.func_184098_a(this.theSlot, this.theSlot.slotNumber, isCtrlKeyDown() ? 1 : 0, ClickType.THROW);
+                this.handleMouseClick(this.theSlot, this.theSlot.slotNumber, isCtrlKeyDown() ? 1 : 0, ClickType.THROW);
             }
         }
     }
@@ -721,7 +721,7 @@ public abstract class GuiContainer extends GuiScreen
             {
                 if (keyCode == this.mc.gameSettings.keyBindsHotbar[i].getKeyCode())
                 {
-                    this.func_184098_a(this.theSlot, this.theSlot.slotNumber, i, ClickType.SWAP);
+                    this.handleMouseClick(this.theSlot, this.theSlot.slotNumber, i, ClickType.SWAP);
                     return true;
                 }
             }
diff --git a/src/net/minecraft/client/gui/inventory/GuiContainerCreative.java b/src/net/minecraft/client/gui/inventory/GuiContainerCreative.java
index 7ed3f4f..05c3eb8 100644
--- a/src/net/minecraft/client/gui/inventory/GuiContainerCreative.java
+++ b/src/net/minecraft/client/gui/inventory/GuiContainerCreative.java
@@ -78,7 +78,7 @@ public class GuiContainerCreative extends InventoryEffectRenderer
         }
     }
 
-    protected void func_184098_a(Slot p_184098_1_, int p_184098_2_, int p_184098_3_, ClickType p_184098_4_)
+    protected void handleMouseClick(Slot p_184098_1_, int p_184098_2_, int p_184098_3_, ClickType p_184098_4_)
     {
         this.field_147057_D = true;
         boolean flag = p_184098_4_ == ClickType.QUICK_MOVE;
diff --git a/src/net/minecraft/client/gui/inventory/GuiEditSign.java b/src/net/minecraft/client/gui/inventory/GuiEditSign.java
index b14a4e1..3dccc01 100644
--- a/src/net/minecraft/client/gui/inventory/GuiEditSign.java
+++ b/src/net/minecraft/client/gui/inventory/GuiEditSign.java
@@ -1,6 +1,7 @@
 package net.minecraft.client.gui.inventory;
 
 import java.io.IOException;
+
 import net.minecraft.block.Block;
 import net.minecraft.client.gui.GuiButton;
 import net.minecraft.client.gui.GuiScreen;
@@ -13,8 +14,12 @@ import net.minecraft.network.play.client.CPacketUpdateSign;
 import net.minecraft.tileentity.TileEntitySign;
 import net.minecraft.util.ChatAllowedCharacters;
 import net.minecraft.util.text.TextComponentString;
+
 import org.lwjgl.input.Keyboard;
 
+import tk.wurst_client.WurstClient;
+import tk.wurst_client.mods.AutoSignMod;
+
 public class GuiEditSign extends GuiScreen
 {
     /** Reference to the sign object. */
@@ -40,6 +45,14 @@ public class GuiEditSign extends GuiScreen
      */
     public void initGui()
     {
+		// TODO: Client
+    	AutoSignMod autoSign = WurstClient.INSTANCE.mods.autoSignMod;
+		if(autoSign.isActive() && autoSign.signText != null)
+		{
+			this.tileSign.signText = autoSign.signText;
+			mc.displayGuiScreen(null);
+		}
+		
         this.buttonList.clear();
         Keyboard.enableRepeatEvents(true);
         this.buttonList.add(this.doneBtn = new GuiButton(0, this.width / 2 - 100, this.height / 4 + 120, I18n.format("gui.done", new Object[0])));
@@ -79,6 +92,11 @@ public class GuiEditSign extends GuiScreen
         {
             if (button.id == 0)
             {
+				// TODO: Client
+				AutoSignMod autoSign = WurstClient.INSTANCE.mods.autoSignMod;
+				if(autoSign.isActive() && autoSign.signText == null)
+					autoSign.signText = this.tileSign.signText;
+				
                 this.tileSign.markDirty();
                 this.mc.displayGuiScreen((GuiScreen)null);
             }
diff --git a/src/net/minecraft/client/multiplayer/PlayerControllerMP.java b/src/net/minecraft/client/multiplayer/PlayerControllerMP.java
index a54fc8f..e3255c1 100644
--- a/src/net/minecraft/client/multiplayer/PlayerControllerMP.java
+++ b/src/net/minecraft/client/multiplayer/PlayerControllerMP.java
@@ -1,5 +1,7 @@
 package net.minecraft.client.multiplayer;
 
+import tk.wurst_client.WurstClient;
+import tk.wurst_client.mods.FastBreakMod;
 import io.netty.buffer.Unpooled;
 import net.minecraft.block.Block;
 import net.minecraft.block.BlockCommandBlock;
@@ -19,15 +21,7 @@ import net.minecraft.item.ItemBlock;
 import net.minecraft.item.ItemStack;
 import net.minecraft.item.ItemSword;
 import net.minecraft.network.PacketBuffer;
-import net.minecraft.network.play.client.CPacketClickWindow;
-import net.minecraft.network.play.client.CPacketCreativeInventoryAction;
-import net.minecraft.network.play.client.CPacketCustomPayload;
-import net.minecraft.network.play.client.CPacketEnchantItem;
-import net.minecraft.network.play.client.CPacketHeldItemChange;
-import net.minecraft.network.play.client.CPacketPlayerBlockPlacement;
-import net.minecraft.network.play.client.CPacketPlayerDigging;
-import net.minecraft.network.play.client.CPacketPlayerTryUseItem;
-import net.minecraft.network.play.client.CPacketUseEntity;
+import net.minecraft.network.play.client.*;
 import net.minecraft.stats.StatFileWriter;
 import net.minecraft.util.ActionResult;
 import net.minecraft.util.EnumActionResult;
@@ -51,7 +45,7 @@ public class PlayerControllerMP
     private ItemStack currentItemHittingBlock;
 
     /** Current block damage (MP) */
-    private float curBlockDamageMP;
+    public static float curBlockDamageMP;
 
     /**
      * Tick counter, when it hits 4 it resets back to 0 and plays the step sound
@@ -82,7 +76,7 @@ public class PlayerControllerMP
     {
         if (!mcIn.theWorld.extinguishFire(mcIn.thePlayer, pos, facing))
         {
-            playerController.func_187103_a(pos);
+            playerController.onPlayerDestroyBlock(pos);
         }
     }
 
@@ -124,7 +118,7 @@ public class PlayerControllerMP
         return this.currentGameType.isSurvivalOrAdventure();
     }
 
-    public boolean func_187103_a(BlockPos p_187103_1_)
+    public boolean onPlayerDestroyBlock(BlockPos p_187103_1_)
     {
         if (this.currentGameType.isAdventure())
         {
@@ -238,7 +232,10 @@ public class PlayerControllerMP
             {
                 this.netClientHandler.addToSendQueue(new CPacketPlayerDigging(CPacketPlayerDigging.Action.START_DESTROY_BLOCK, loc, face));
                 clickBlockCreative(this.mc, this, loc, face);
-                this.blockHitDelay = 5;
+                
+                //TODO: Client
+                this.blockHitDelay = WurstClient.INSTANCE.mods.fastBreakMod.isEnabled() ? 0 : 5;
+                
             }
             else if (!this.isHittingBlock || !this.isHittingPosition(loc))
             {
@@ -258,7 +255,7 @@ public class PlayerControllerMP
 
                 if (flag && iblockstate.getPlayerRelativeBlockHardness(this.mc.thePlayer, this.mc.thePlayer.worldObj, loc) >= 1.0F)
                 {
-                    this.func_187103_a(loc);
+                    this.onPlayerDestroyBlock(loc);
                 }
                 else
                 {
@@ -301,7 +298,9 @@ public class PlayerControllerMP
         }
         else if (this.currentGameType.isCreative() && this.mc.theWorld.getWorldBorder().contains(posBlock))
         {
-            this.blockHitDelay = 5;
+        	//TODO: Client
+            this.blockHitDelay = WurstClient.INSTANCE.mods.fastBreakMod.isEnabled() ? 0 : 5;
+            
             this.netClientHandler.addToSendQueue(new CPacketPlayerDigging(CPacketPlayerDigging.Action.START_DESTROY_BLOCK, posBlock, directionFacing));
             clickBlockCreative(this.mc, this, posBlock, directionFacing);
             return true;
@@ -318,7 +317,16 @@ public class PlayerControllerMP
             }
             else
             {
-                this.curBlockDamageMP += iblockstate.getPlayerRelativeBlockHardness(this.mc.thePlayer, this.mc.thePlayer.worldObj, posBlock);
+				// TODO: Client
+				FastBreakMod fastBreak = WurstClient.INSTANCE.mods.fastBreakMod;
+				this.curBlockDamageMP +=
+					iblockstate
+						.getPlayerRelativeBlockHardness(this.mc.thePlayer,
+							this.mc.thePlayer.worldObj, posBlock)
+						* (fastBreak.isActive()
+							&& !this.currentGameType.isCreative()
+							&& WurstClient.INSTANCE.options.fastbreakMode == 0
+							? fastBreak.speed : 1);
 
                 if (this.stepSoundTickCounter % 4.0F == 0.0F)
                 {
@@ -332,10 +340,21 @@ public class PlayerControllerMP
                 {
                     this.isHittingBlock = false;
                     this.netClientHandler.addToSendQueue(new CPacketPlayerDigging(CPacketPlayerDigging.Action.STOP_DESTROY_BLOCK, posBlock, directionFacing));
-                    this.func_187103_a(posBlock);
+                    this.onPlayerDestroyBlock(posBlock);
                     this.curBlockDamageMP = 0.0F;
                     this.stepSoundTickCounter = 0.0F;
                     this.blockHitDelay = 5;
+                    
+					// TODO: Client
+				}else if(!this.currentGameType.isCreative()
+					&& WurstClient.INSTANCE.mods.fastBreakMod.isEnabled()
+					&& WurstClient.INSTANCE.options.fastbreakMode == 1)
+				{
+					
+					this.netClientHandler
+						.addToSendQueue(new CPacketPlayerDigging(
+							CPacketPlayerDigging.Action.STOP_DESTROY_BLOCK,
+							posBlock, directionFacing));
 				}
 
                 this.mc.theWorld.sendBlockBreakProgress(this.mc.thePlayer.getEntityId(), this.currentBlock, (int)(this.curBlockDamageMP * 10.0F) - 1);
@@ -468,7 +487,7 @@ public class PlayerControllerMP
         }
     }
 
-    public EnumActionResult func_187101_a(EntityPlayer p_187101_1_, World p_187101_2_, ItemStack p_187101_3_, EnumHand p_187101_4_)
+    public EnumActionResult sendUseItem(EntityPlayer p_187101_1_, World p_187101_2_, ItemStack p_187101_3_, EnumHand p_187101_4_)
     {
         if (this.currentGameType == WorldSettings.GameType.SPECTATOR)
         {
@@ -539,7 +558,7 @@ public class PlayerControllerMP
         return this.currentGameType == WorldSettings.GameType.SPECTATOR ? EnumActionResult.PASS : p_187102_2_.func_184199_a(p_187102_1_, vec3d, p_187102_4_, p_187102_5_);
     }
 
-    public ItemStack func_187098_a(int p_187098_1_, int p_187098_2_, int p_187098_3_, ClickType p_187098_4_, EntityPlayer p_187098_5_)
+    public ItemStack windowClick(int p_187098_1_, int p_187098_2_, int p_187098_3_, ClickType p_187098_4_, EntityPlayer p_187098_5_)
     {
         short short1 = p_187098_5_.openContainer.getNextTransactionID(p_187098_5_.inventory);
         ItemStack itemstack = p_187098_5_.openContainer.func_184996_a(p_187098_2_, p_187098_3_, p_187098_4_, p_187098_5_);
diff --git a/src/net/minecraft/client/multiplayer/ServerList.java b/src/net/minecraft/client/multiplayer/ServerList.java
index 060ef17..d60ddd9 100644
--- a/src/net/minecraft/client/multiplayer/ServerList.java
+++ b/src/net/minecraft/client/multiplayer/ServerList.java
@@ -24,6 +24,12 @@ public class ServerList
         this.loadServerList();
     }
 
+    //TODO: Client
+    public void clearServerList()
+    {
+    	this.servers.clear();
+    }
+
     /**
      * Loads a list of servers from servers.dat, by running ServerData.getServerDataFromNBTCompound on each NBT compound
      * found in the "servers" tag list.
diff --git a/src/net/minecraft/client/network/NetHandlerPlayClient.java b/src/net/minecraft/client/network/NetHandlerPlayClient.java
index b7f7be5..1db63d4 100644
--- a/src/net/minecraft/client/network/NetHandlerPlayClient.java
+++ b/src/net/minecraft/client/network/NetHandlerPlayClient.java
@@ -27,7 +27,7 @@ import net.minecraft.client.gui.GuiCommandBlock;
 import net.minecraft.client.gui.GuiDisconnected;
 import net.minecraft.client.gui.GuiDownloadTerrain;
 import net.minecraft.client.gui.GuiGameOver;
-import net.minecraft.client.gui.GuiMainMenu;
+import tk.wurst_client.gui.main.GuiWurstMainMenu;
 import net.minecraft.client.gui.GuiMerchant;
 import net.minecraft.client.gui.GuiMultiplayer;
 import net.minecraft.client.gui.GuiScreen;
@@ -837,7 +837,7 @@ public class NetHandlerPlayClient implements INetHandlerPlayClient
         }
         else
         {
-            this.gameController.displayGuiScreen(new GuiDisconnected(new GuiMultiplayer(new GuiMainMenu()), "disconnect.lost", reason));
+            this.gameController.displayGuiScreen(new GuiDisconnected(new GuiMultiplayer(new GuiWurstMainMenu()), "disconnect.lost", reason));
         }
     }
 
@@ -1629,7 +1629,7 @@ public class NetHandlerPlayClient implements INetHandlerPlayClient
 
         if (entity instanceof EntityLivingBase)
         {
-            ((EntityLivingBase)entity).func_184596_c(packetIn.getPotion());
+            ((EntityLivingBase)entity).removePotionEffectClient(packetIn.getPotion());
         }
     }
 
diff --git a/src/net/minecraft/client/network/NetworkPlayerInfo.java b/src/net/minecraft/client/network/NetworkPlayerInfo.java
index 7ed5f12..ac56d75 100644
--- a/src/net/minecraft/client/network/NetworkPlayerInfo.java
+++ b/src/net/minecraft/client/network/NetworkPlayerInfo.java
@@ -5,7 +5,9 @@ import com.google.common.collect.Maps;
 import com.mojang.authlib.GameProfile;
 import com.mojang.authlib.minecraft.MinecraftProfileTexture;
 import com.mojang.authlib.minecraft.MinecraftProfileTexture.Type;
+
 import java.util.Map;
+
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.resources.DefaultPlayerSkin;
 import net.minecraft.client.resources.SkinManager;
@@ -163,6 +165,14 @@ public class NetworkPlayerInfo
         return this.displayName;
     }
 
+    //TODO: Client
+    public String getPlayerNameForReal()
+	{
+		return this.getDisplayName() != null ? this.getDisplayName()
+			.getFormattedText() : ScorePlayerTeam.formatPlayerName(
+			this.getPlayerTeam(), this.getGameProfile().getName());
+	}
+
     public int func_178835_l()
     {
         return this.field_178873_i;
diff --git a/src/net/minecraft/client/renderer/BlockModelRenderer.java b/src/net/minecraft/client/renderer/BlockModelRenderer.java
index 628f4dd..92dc601 100644
--- a/src/net/minecraft/client/renderer/BlockModelRenderer.java
+++ b/src/net/minecraft/client/renderer/BlockModelRenderer.java
@@ -2,6 +2,9 @@ package net.minecraft.client.renderer;
 
 import java.util.BitSet;
 import java.util.List;
+
+import tk.wurst_client.WurstClient;
+import tk.wurst_client.utils.XRayUtils;
 import net.minecraft.block.Block;
 import net.minecraft.block.state.IBlockState;
 import net.minecraft.client.Minecraft;
@@ -71,7 +74,10 @@ public class BlockModelRenderer
 
         List<BakedQuad> list1 = modelIn.getQuads(stateIn, (EnumFacing)null, rand);
 
-        if (!list1.isEmpty())
+		// TODO: Client
+		if(!list1.isEmpty()
+			&& (!WurstClient.INSTANCE.mods.xRayMod.isActive() || XRayUtils
+				.isXRayBlock(stateIn.getBlock())))
         {
             this.renderQuadsSmooth(worldIn, stateIn, posIn, buffer, list1, afloat, bitset, blockmodelrenderer$ambientocclusionface);
             flag = true;
diff --git a/src/net/minecraft/client/renderer/EntityRenderer.java b/src/net/minecraft/client/renderer/EntityRenderer.java
index e8fdae5..791db14 100644
--- a/src/net/minecraft/client/renderer/EntityRenderer.java
+++ b/src/net/minecraft/client/renderer/EntityRenderer.java
@@ -3,6 +3,7 @@ package net.minecraft.client.renderer;
 import com.google.common.base.Predicate;
 import com.google.common.base.Predicates;
 import com.google.gson.JsonSyntaxException;
+
 import java.awt.Graphics;
 import java.awt.image.BufferedImage;
 import java.awt.image.ImageObserver;
@@ -12,7 +13,9 @@ import java.nio.FloatBuffer;
 import java.util.List;
 import java.util.Random;
 import java.util.concurrent.Callable;
+
 import javax.imageio.ImageIO;
+
 import net.minecraft.block.Block;
 import net.minecraft.block.BlockBed;
 import net.minecraft.block.material.Material;
@@ -48,6 +51,7 @@ import net.minecraft.init.MobEffects;
 import net.minecraft.init.SoundEvents;
 import net.minecraft.inventory.IInventory;
 import net.minecraft.item.ItemStack;
+import net.minecraft.potion.Potion;
 import net.minecraft.util.BlockRenderLayer;
 import net.minecraft.util.EntitySelectors;
 import net.minecraft.util.EnumFacing;
@@ -65,6 +69,7 @@ import net.minecraft.util.math.Vec3d;
 import net.minecraft.world.World;
 import net.minecraft.world.WorldSettings;
 import net.minecraft.world.biome.BiomeGenBase;
+
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.lwjgl.input.Mouse;
@@ -72,6 +77,10 @@ import org.lwjgl.opengl.Display;
 import org.lwjgl.opengl.GLContext;
 import org.lwjgl.util.glu.Project;
 
+import tk.wurst_client.WurstClient;
+import tk.wurst_client.events.RenderEvent;
+import tk.wurst_client.hooks.ZoomHook;
+
 public class EntityRenderer implements IResourceManagerReloadListener
 {
     private static final Logger logger = LogManager.getLogger();
@@ -178,10 +187,10 @@ public class EntityRenderer implements IResourceManagerReloadListener
     private double cameraZoom = 1.0D;
     private double cameraYaw;
     private double cameraPitch;
-    private ShaderGroup theShaderGroup;
-    private static final ResourceLocation[] shaderResourceLocations = new ResourceLocation[] {new ResourceLocation("shaders/post/notch.json"), new ResourceLocation("shaders/post/fxaa.json"), new ResourceLocation("shaders/post/art.json"), new ResourceLocation("shaders/post/bumpy.json"), new ResourceLocation("shaders/post/blobs2.json"), new ResourceLocation("shaders/post/pencil.json"), new ResourceLocation("shaders/post/color_convolve.json"), new ResourceLocation("shaders/post/deconverge.json"), new ResourceLocation("shaders/post/flip.json"), new ResourceLocation("shaders/post/invert.json"), new ResourceLocation("shaders/post/ntsc.json"), new ResourceLocation("shaders/post/outline.json"), new ResourceLocation("shaders/post/phosphor.json"), new ResourceLocation("shaders/post/scan_pincushion.json"), new ResourceLocation("shaders/post/sobel.json"), new ResourceLocation("shaders/post/bits.json"), new ResourceLocation("shaders/post/desaturate.json"), new ResourceLocation("shaders/post/green.json"), new ResourceLocation("shaders/post/blur.json"), new ResourceLocation("shaders/post/wobble.json"), new ResourceLocation("shaders/post/blobs.json"), new ResourceLocation("shaders/post/antialias.json"), new ResourceLocation("shaders/post/creeper.json"), new ResourceLocation("shaders/post/spider.json")};
+    public ShaderGroup theShaderGroup;
+    public static final ResourceLocation[] shaderResourceLocations = new ResourceLocation[] {new ResourceLocation("shaders/post/notch.json"), new ResourceLocation("shaders/post/fxaa.json"), new ResourceLocation("shaders/post/art.json"), new ResourceLocation("shaders/post/bumpy.json"), new ResourceLocation("shaders/post/blobs2.json"), new ResourceLocation("shaders/post/pencil.json"), new ResourceLocation("shaders/post/color_convolve.json"), new ResourceLocation("shaders/post/deconverge.json"), new ResourceLocation("shaders/post/flip.json"), new ResourceLocation("shaders/post/invert.json"), new ResourceLocation("shaders/post/ntsc.json"), new ResourceLocation("shaders/post/outline.json"), new ResourceLocation("shaders/post/phosphor.json"), new ResourceLocation("shaders/post/scan_pincushion.json"), new ResourceLocation("shaders/post/sobel.json"), new ResourceLocation("shaders/post/bits.json"), new ResourceLocation("shaders/post/desaturate.json"), new ResourceLocation("shaders/post/green.json"), new ResourceLocation("shaders/post/blur.json"), new ResourceLocation("shaders/post/wobble.json"), new ResourceLocation("shaders/post/blobs.json"), new ResourceLocation("shaders/post/antialias.json"), new ResourceLocation("shaders/post/creeper.json"), new ResourceLocation("shaders/post/spider.json")};
     public static final int shaderCount = shaderResourceLocations.length;
-    private int shaderIndex;
+    public int shaderIndex;
     private boolean useShader;
     private int frameCount;
 
@@ -262,7 +271,7 @@ public class EntityRenderer implements IResourceManagerReloadListener
         }
     }
 
-    private void loadShader(ResourceLocation resourceLocationIn)
+    public void loadShader(ResourceLocation resourceLocationIn)
     {
         try
         {
@@ -539,6 +548,10 @@ public class EntityRenderer implements IResourceManagerReloadListener
             if (useFOVSetting)
             {
                 f = this.mc.gameSettings.fovSetting;
+				
+				// TODO: Client
+				f = ZoomHook.changeFovBasedOnZoom(f);
+				
                 f = f * (this.fovModifierHandPrev + (this.fovModifierHand - this.fovModifierHandPrev) * partialTicks);
             }
 
@@ -751,14 +764,17 @@ public class EntityRenderer implements IResourceManagerReloadListener
 
         this.hurtCameraEffect(partialTicks);
 
-        if (this.mc.gameSettings.viewBobbing)
+		// TODO: Client
+		if(this.mc.gameSettings.viewBobbing
+			&& !WurstClient.INSTANCE.mods.tracersMod.isActive())
         {
             this.setupViewBobbing(partialTicks);
         }
 
         float f1 = this.mc.thePlayer.prevTimeInPortal + (this.mc.thePlayer.timeInPortal - this.mc.thePlayer.prevTimeInPortal) * partialTicks;
 
-        if (f1 > 0.0F)
+		// TODO: Client
+		if(f1 > 0.0F && !WurstClient.INSTANCE.mods.antiBlindMod.isActive())
         {
             int i = 20;
 
@@ -1293,7 +1309,11 @@ public class EntityRenderer implements IResourceManagerReloadListener
         }
 
         this.getMouseOver(partialTicks);
+        
+		// TODO: Client
+		if(!WurstClient.INSTANCE.mods.caveFinderMod.isActive())
 			GlStateManager.enableDepth();
+		
         GlStateManager.enableAlpha();
         GlStateManager.alphaFunc(516, 0.5F);
         this.mc.mcProfiler.startSection("center");
@@ -1463,6 +1483,10 @@ public class EntityRenderer implements IResourceManagerReloadListener
 
         this.mc.mcProfiler.endStartSection("hand");
 
+		// TODO: Client
+		WurstClient.INSTANCE.events.fireEvent(RenderEvent.class,
+			new RenderEvent());
+
         if (this.renderHand)
         {
             GlStateManager.clear(256);
@@ -1847,8 +1871,12 @@ public class EntityRenderer implements IResourceManagerReloadListener
         this.fogColorBlue *= f13;
         double d1 = (entity.lastTickPosY + (entity.posY - entity.lastTickPosY) * (double)partialTicks) * world.provider.getVoidFogYFactor();
 
-        if (entity instanceof EntityLivingBase && ((EntityLivingBase)entity).isPotionActive(MobEffects.blindness))
+		// TODO: Client
+		if(entity instanceof EntityLivingBase
+			&& ((EntityLivingBase)entity).isPotionActive(MobEffects.blindness)
+			&& !WurstClient.INSTANCE.mods.antiBlindMod.isActive())
         {
+			
             int i = ((EntityLivingBase)entity).getActivePotionEffect(MobEffects.blindness).getDuration();
 
             if (i < 20)
@@ -1927,7 +1955,10 @@ public class EntityRenderer implements IResourceManagerReloadListener
         GlStateManager.color(1.0F, 1.0F, 1.0F, 1.0F);
         IBlockState iblockstate = ActiveRenderInfo.func_186703_a(this.mc.theWorld, entity, partialTicks);
 
-        if (entity instanceof EntityLivingBase && ((EntityLivingBase)entity).isPotionActive(MobEffects.blindness))
+		// TODO: Client
+		if(entity instanceof EntityLivingBase
+			&& ((EntityLivingBase)entity).isPotionActive(MobEffects.blindness)
+			&& !WurstClient.INSTANCE.mods.antiBlindMod.isActive())
         {
             float f1 = 5.0F;
             int i = ((EntityLivingBase)entity).getActivePotionEffect(MobEffects.blindness).getDuration();
diff --git a/src/net/minecraft/client/renderer/RenderGlobal.java b/src/net/minecraft/client/renderer/RenderGlobal.java
index 3220298..1d9b9e0 100644
--- a/src/net/minecraft/client/renderer/RenderGlobal.java
+++ b/src/net/minecraft/client/renderer/RenderGlobal.java
@@ -2328,7 +2328,7 @@ public class RenderGlobal implements IWorldEventListener, IResourceManagerReload
                 break;
 
             case 1032:
-                this.mc.getSoundHandler().playSound(PositionedSoundRecord.func_184371_a(SoundEvents.block_portal_travel, random.nextFloat() * 0.4F + 0.8F));
+                this.mc.getSoundHandler().playSound(PositionedSoundRecord.createPositionedSoundRecord(SoundEvents.block_portal_travel, random.nextFloat() * 0.4F + 0.8F));
                 break;
 
             case 1033:
diff --git a/src/net/minecraft/client/renderer/chunk/VisGraph.java b/src/net/minecraft/client/renderer/chunk/VisGraph.java
index 1fe434a..b9bd178 100644
--- a/src/net/minecraft/client/renderer/chunk/VisGraph.java
+++ b/src/net/minecraft/client/renderer/chunk/VisGraph.java
@@ -20,7 +20,9 @@ public class VisGraph
 
     public void func_178606_a(BlockPos pos)
     {
-        this.field_178612_d.set(getIndex(pos), true);
+    	// TODO: Client
+        // this.field_178612_d.set(getIndex(pos), true);
+    	
         --this.field_178611_f;
     }
 
diff --git a/src/net/minecraft/client/renderer/entity/Render.java b/src/net/minecraft/client/renderer/entity/Render.java
index 884e95f..4893e06 100644
--- a/src/net/minecraft/client/renderer/entity/Render.java
+++ b/src/net/minecraft/client/renderer/entity/Render.java
@@ -1,5 +1,6 @@
 package net.minecraft.client.renderer.entity;
 
+import tk.wurst_client.WurstClient;
 import net.minecraft.block.state.IBlockState;
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.gui.FontRenderer;
@@ -364,14 +365,34 @@ public abstract class Render<T extends Entity>
 
         if (d0 <= (double)(maxDistance * maxDistance))
         {
-            boolean flag = entityIn.isSneaking();
+			// TODO: Client
+			boolean nameTagsActive =
+				WurstClient.INSTANCE.mods.nameTagsMod.isActive();
+            boolean flag = entityIn.isSneaking() && !nameTagsActive;
+            
             GlStateManager.pushMatrix();
             float f = flag ? 0.25F : 0.0F;
             GlStateManager.translate((float)x, (float)y + entityIn.height + 0.5F - f, (float)z);
             GlStateManager.glNormal3f(0.0F, 1.0F, 0.0F);
             GlStateManager.rotate(-this.renderManager.playerViewY, 0.0F, 1.0F, 0.0F);
             GlStateManager.rotate((float)(this.renderManager.options.thirdPersonView == 2 ? -1 : 1) * this.renderManager.playerViewX, 1.0F, 0.0F, 0.0F);
-            GlStateManager.scale(-0.025F, -0.025F, 0.025F);
+
+			// TODO: Client
+            float scaleFactor =
+            	0.016666668F * 1.6F * (entityIn
+            		.getDistanceToEntity(this.renderManager.livingPlayer) > 10
+            		&& nameTagsActive ? entityIn
+            			.getDistanceToEntity(this.renderManager.livingPlayer) / 10
+            			: 1);
+            scaleFactor *=
+            	(nameTagsActive
+            		? (entityIn.boundingBox.getAverageEdgeLength() > -50
+            			? 1
+            				: entityIn
+            				.getDistanceToEntity(this.renderManager.livingPlayer) / 300)
+            				: 1);
+            GlStateManager.scale(-scaleFactor, -scaleFactor, scaleFactor);
+            
             GlStateManager.disableLighting();
             GlStateManager.depthMask(false);
 
diff --git a/src/net/minecraft/client/renderer/entity/RenderManager.java b/src/net/minecraft/client/renderer/entity/RenderManager.java
index 6701a94..651984e 100644
--- a/src/net/minecraft/client/renderer/entity/RenderManager.java
+++ b/src/net/minecraft/client/renderer/entity/RenderManager.java
@@ -116,9 +116,9 @@ public class RenderManager
 
     /** Renders fonts */
     private FontRenderer textRenderer;
-    private double renderPosX;
-    private double renderPosY;
-    private double renderPosZ;
+    public double renderPosX;
+    public double renderPosY;
+    public double renderPosZ;
     public TextureManager renderEngine;
 
     /** Reference to the World object. */
diff --git a/src/net/minecraft/client/resources/SkinManager.java b/src/net/minecraft/client/resources/SkinManager.java
index 65b26b7..6f5c710 100644
--- a/src/net/minecraft/client/resources/SkinManager.java
+++ b/src/net/minecraft/client/resources/SkinManager.java
@@ -9,6 +9,7 @@ import com.mojang.authlib.minecraft.InsecureTextureException;
 import com.mojang.authlib.minecraft.MinecraftProfileTexture;
 import com.mojang.authlib.minecraft.MinecraftSessionService;
 import com.mojang.authlib.minecraft.MinecraftProfileTexture.Type;
+
 import java.awt.image.BufferedImage;
 import java.io.File;
 import java.util.Map;
@@ -16,6 +17,8 @@ import java.util.concurrent.ExecutorService;
 import java.util.concurrent.LinkedBlockingQueue;
 import java.util.concurrent.ThreadPoolExecutor;
 import java.util.concurrent.TimeUnit;
+
+import tk.wurst_client.capes.WurstCapes;
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.renderer.IImageBuffer;
 import net.minecraft.client.renderer.ImageBufferDownload;
@@ -128,6 +131,9 @@ public class SkinManager
                     map.putAll(SkinManager.this.sessionService.getTextures(profile, false));
                 }
 
+				// TODO: Client
+                WurstCapes.checkCape(profile, map, skinAvailableCallback);
+
                 Minecraft.getMinecraft().addScheduledTask(new Runnable()
                 {
                     public void run()
diff --git a/src/net/minecraft/client/settings/KeyBinding.java b/src/net/minecraft/client/settings/KeyBinding.java
index 847c038..98d396f 100644
--- a/src/net/minecraft/client/settings/KeyBinding.java
+++ b/src/net/minecraft/client/settings/KeyBinding.java
@@ -19,7 +19,7 @@ public class KeyBinding implements Comparable<KeyBinding>
     private int keyCode;
 
     /** Is the key held down? */
-    private boolean pressed;
+    public boolean pressed;
     private int pressTime;
 
     public static void onTick(int keyCode)
diff --git a/src/net/minecraft/command/CommandEffect.java b/src/net/minecraft/command/CommandEffect.java
index ff6e634..778b1a6 100644
--- a/src/net/minecraft/command/CommandEffect.java
+++ b/src/net/minecraft/command/CommandEffect.java
@@ -125,7 +125,7 @@ public class CommandEffect extends CommandBase
                     }
                     else if (entitylivingbase.isPotionActive(potion))
                     {
-                        entitylivingbase.func_184589_d(potion);
+                        entitylivingbase.removePotionEffect(potion);
                         notifyOperators(sender, this, "commands.effect.success.removed", new Object[] {new TextComponentTranslation(potion.getName(), new Object[0]), entitylivingbase.getName()});
                     }
                     else
diff --git a/src/net/minecraft/crash/CrashReport.java b/src/net/minecraft/crash/CrashReport.java
index 05419a6..1c0220b 100644
--- a/src/net/minecraft/crash/CrashReport.java
+++ b/src/net/minecraft/crash/CrashReport.java
@@ -1,6 +1,7 @@
 package net.minecraft.crash;
 
 import com.google.common.collect.Lists;
+
 import java.io.File;
 import java.io.FileWriter;
 import java.io.PrintWriter;
@@ -12,13 +13,17 @@ import java.text.SimpleDateFormat;
 import java.util.Date;
 import java.util.List;
 import java.util.concurrent.Callable;
+
 import net.minecraft.util.ReportedException;
 import net.minecraft.world.gen.layer.IntCache;
+
 import org.apache.commons.io.IOUtils;
 import org.apache.commons.lang3.ArrayUtils;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 
+import tk.wurst_client.crash.CrashSectionWurstVersion;
+
 public class CrashReport
 {
     private static final Logger logger = LogManager.getLogger();
@@ -60,6 +65,10 @@ public class CrashReport
                 return "1.9";
             }
         });
+        
+        //TODO: Client
+        this.theReportCategory.addCrashSectionCallable("Wurst Client Version", new CrashSectionWurstVersion());
+        
         this.theReportCategory.addCrashSectionCallable("Operating System", new Callable<String>()
         {
             public String call()
@@ -229,7 +238,11 @@ public class CrashReport
     public String getCompleteReport()
     {
         StringBuilder stringbuilder = new StringBuilder();
-        stringbuilder.append("---- Minecraft Crash Report ----\n");
+        
+		// TODO: Client
+		stringbuilder.append("---------------- Wurst Client Crash Report ----------------\n");
+		stringbuilder.append("---- Please report this crash at: wurst-client.tk/bugs ----\n");
+        
         stringbuilder.append("// ");
         stringbuilder.append(getWittyComment());
         stringbuilder.append("\n\n");
@@ -362,7 +375,46 @@ public class CrashReport
      */
     private static String getWittyComment()
     {
-        String[] astring = new String[] {"Who set us up the TNT?", "Everything\'s going to plan. No, really, that was supposed to happen.", "Uh... Did I do that?", "Oops.", "Why did you do that?", "I feel sad now :(", "My bad.", "I\'m sorry, Dave.", "I let you down. Sorry :(", "On the bright side, I bought you a teddy bear!", "Daisy, daisy...", "Oh - I know what I did wrong!", "Hey, that tickles! Hehehe!", "I blame Dinnerbone.", "You should try our sister game, Minceraft!", "Don\'t be sad. I\'ll do better next time, I promise!", "Don\'t be sad, have a hug! <3", "I just don\'t know what went wrong :(", "Shall we play a game?", "Quite honestly, I wouldn\'t worry myself about that.", "I bet Cylons wouldn\'t have this problem.", "Sorry :(", "Surprise! Haha. Well, this is awkward.", "Would you like a cupcake?", "Hi. I\'m Minecraft, and I\'m a crashaholic.", "Ooh. Shiny.", "This doesn\'t make any sense!", "Why is it breaking :(", "Don\'t do that.", "Ouch. That hurt :(", "You\'re mean.", "This is a token for 1 free hug. Redeem at your nearest Mojangsta: [~~HUG~~]", "There are four lights!", "But it works on my machine."};
+		// TODO: Client
+		// Added some extra comments
+		String[] astring =
+			new String[]{
+				"Who set us up the TNT?",
+				"Everything\'s going to plan. No, really, that was supposed to happen.",
+				"Uh... Did I do that?",
+				"Oops.",
+				"Why did you do that?",
+				"I feel sad now :(",
+				"My bad.",
+				"I\'m sorry, Dave.",
+				"I let you down. Sorry :(",
+				"On the bright side, I bought you a teddy bear!",
+				"Daisy, daisy...",
+				"Oh - I know what I did wrong!",
+				"Hey, that tickles! Hehehe!",
+				"I blame Dinnerbone.",
+				"You should try our sister game, Minceraft!",
+				"Don\'t be sad. I\'ll do better next time, I promise!",
+				"Don\'t be sad, have a hug! <3",
+				"I just don\'t know what went wrong :(",
+				"Shall we play a game?",
+				"Quite honestly, I wouldn\'t worry myself about that.",
+				"I bet Cylons wouldn\'t have this problem.",
+				"Sorry :(",
+				"Surprise! Haha. Well, this is awkward.",
+				"Would you like a cupcake?",
+				"Hi. I\'m Minecraft, and I\'m a crashaholic.",
+				"Ooh. Shiny.",
+				"This doesn\'t make any sense!",
+				"Why is it breaking :(",
+				"Don\'t do that.",
+				"Ouch. That hurt :(",
+				"You\'re mean.",
+				"This is a token for 1 free hug. Redeem at your nearest Mojangsta: [~~HUG~~]",
+				"There are four lights!", "But it works on my machine.",
+				"I blame Apple.",
+				"At least you got a nice looking crash report!",
+				"Immer weiter gehen, nicht stehen bleiben!"};
 
         try
         {
diff --git a/src/net/minecraft/entity/Entity.java b/src/net/minecraft/entity/Entity.java
index 85a68a2..16b8e10 100644
--- a/src/net/minecraft/entity/Entity.java
+++ b/src/net/minecraft/entity/Entity.java
@@ -125,7 +125,7 @@ public abstract class Entity implements ICommandSender
     public float prevRotationPitch;
 
     /** Axis aligned bounding box. */
-    private AxisAlignedBB boundingBox;
+    public AxisAlignedBB boundingBox;
     public boolean onGround;
 
     /**
@@ -143,7 +143,7 @@ public abstract class Entity implements ICommandSender
      */
     public boolean isCollided;
     public boolean velocityChanged;
-    protected boolean isInWeb;
+    public boolean isInWeb;
     private boolean isOutsideBorder;
 
     /**
diff --git a/src/net/minecraft/entity/EntityLivingBase.java b/src/net/minecraft/entity/EntityLivingBase.java
index d1580a1..19a5018 100644
--- a/src/net/minecraft/entity/EntityLivingBase.java
+++ b/src/net/minecraft/entity/EntityLivingBase.java
@@ -836,14 +836,14 @@ public abstract class EntityLivingBase extends Entity
         return this.getCreatureAttribute() == EnumCreatureAttribute.UNDEAD;
     }
 
-    public PotionEffect func_184596_c(Potion p_184596_1_)
+    public PotionEffect removePotionEffectClient(Potion p_184596_1_)
     {
         return (PotionEffect)this.activePotionsMap.remove(p_184596_1_);
     }
 
-    public void func_184589_d(Potion p_184589_1_)
+    public void removePotionEffect(Potion p_184589_1_)
     {
-        PotionEffect potioneffect = this.func_184596_c(p_184589_1_);
+        PotionEffect potioneffect = this.removePotionEffectClient(p_184589_1_);
 
         if (potioneffect != null)
         {
diff --git a/src/net/minecraft/entity/monster/EntityZombie.java b/src/net/minecraft/entity/monster/EntityZombie.java
index a65657e..9d9e562 100644
--- a/src/net/minecraft/entity/monster/EntityZombie.java
+++ b/src/net/minecraft/entity/monster/EntityZombie.java
@@ -637,7 +637,7 @@ public class EntityZombie extends EntityMob
     {
         this.conversionTime = ticks;
         this.getDataManager().set(CONVERTING, Boolean.valueOf(true));
-        this.func_184589_d(MobEffects.weakness);
+        this.removePotionEffect(MobEffects.weakness);
         this.addPotionEffect(new PotionEffect(MobEffects.damageBoost, ticks, Math.min(this.worldObj.getDifficulty().getDifficultyId() - 1, 0)));
         this.worldObj.setEntityState(this, (byte)16);
     }
diff --git a/src/net/minecraft/entity/player/EntityPlayer.java b/src/net/minecraft/entity/player/EntityPlayer.java
index 23d8999..b4ec5c2 100644
--- a/src/net/minecraft/entity/player/EntityPlayer.java
+++ b/src/net/minecraft/entity/player/EntityPlayer.java
@@ -3,10 +3,13 @@ package net.minecraft.entity.player;
 import com.google.common.base.Charsets;
 import com.google.common.collect.Lists;
 import com.mojang.authlib.GameProfile;
+
 import java.util.Arrays;
 import java.util.Collection;
 import java.util.List;
 import java.util.UUID;
+
+import tk.wurst_client.WurstClient;
 import net.minecraft.block.Block;
 import net.minecraft.block.BlockBed;
 import net.minecraft.block.BlockHorizontal;
@@ -2342,7 +2345,9 @@ public abstract class EntityPlayer extends EntityLivingBase
 
     public boolean isPushedByWater()
     {
-        return !this.capabilities.isFlying;
+		// TODO: Client
+		return !this.capabilities.isFlying
+			&& !WurstClient.INSTANCE.mods.antiKnockbackMod.isActive();
     }
 
     public Scoreboard getWorldScoreboard()
diff --git a/src/net/minecraft/network/NetworkManager.java b/src/net/minecraft/network/NetworkManager.java
index 0d831b0..31ff3d6 100644
--- a/src/net/minecraft/network/NetworkManager.java
+++ b/src/net/minecraft/network/NetworkManager.java
@@ -2,6 +2,7 @@ package net.minecraft.network;
 
 import com.google.common.collect.Queues;
 import com.google.common.util.concurrent.ThreadFactoryBuilder;
+
 import io.netty.bootstrap.Bootstrap;
 import io.netty.channel.Channel;
 import io.netty.channel.ChannelException;
@@ -27,17 +28,21 @@ import io.netty.handler.timeout.TimeoutException;
 import io.netty.util.AttributeKey;
 import io.netty.util.concurrent.Future;
 import io.netty.util.concurrent.GenericFutureListener;
+
 import java.net.InetAddress;
 import java.net.SocketAddress;
 import java.util.Queue;
 import java.util.concurrent.locks.ReentrantReadWriteLock;
+
 import javax.crypto.SecretKey;
+
 import net.minecraft.util.CryptManager;
 import net.minecraft.util.ITickable;
 import net.minecraft.util.LazyLoadBase;
 import net.minecraft.util.text.ITextComponent;
 import net.minecraft.util.text.TextComponentString;
 import net.minecraft.util.text.TextComponentTranslation;
+
 import org.apache.commons.lang3.ArrayUtils;
 import org.apache.commons.lang3.Validate;
 import org.apache.logging.log4j.LogManager;
@@ -45,6 +50,9 @@ import org.apache.logging.log4j.Logger;
 import org.apache.logging.log4j.Marker;
 import org.apache.logging.log4j.MarkerManager;
 
+import tk.wurst_client.WurstClient;
+import tk.wurst_client.events.PacketInputEvent;
+
 public class NetworkManager extends SimpleChannelInboundHandler < Packet<? >>
 {
     private static final Logger logger = LogManager.getLogger();
@@ -130,9 +138,21 @@ public class NetworkManager extends SimpleChannelInboundHandler < Packet<? >>
     {
         TextComponentTranslation textcomponenttranslation;
 
+
         if (p_exceptionCaught_2_ instanceof TimeoutException)
         {
             textcomponenttranslation = new TextComponentTranslation("disconnect.timeout", new Object[0]);
+            
+			// TODO: Client
+		}else if(p_exceptionCaught_2_ instanceof NullPointerException)
+		{
+			textcomponenttranslation =
+				new TextComponentTranslation(
+					"disconnect.genericReason",
+					"§c[§6Wurst§c]§r\n"
+						+ "You are using a §ocracked§r alt on a §opremium§r server."
+						+ "\n§cDon't do that!");
+			
 		}
         else
         {
@@ -147,6 +167,12 @@ public class NetworkManager extends SimpleChannelInboundHandler < Packet<? >>
     {
         if (this.channel.isOpen())
         {
+			//TODO: Client
+			PacketInputEvent event = new PacketInputEvent(p_channelRead0_2_);
+			WurstClient.INSTANCE.events.fireEvent(PacketInputEvent.class, event);
+			if(event.isCancelled())
+				return;
+			
             try
             {
                 ((Packet<INetHandler>)p_channelRead0_2_).processPacket(this.packetListener);
diff --git a/src/net/minecraft/realms/Realms.java b/src/net/minecraft/realms/Realms.java
index 3cba0d7..3243c19 100644
--- a/src/net/minecraft/realms/Realms.java
+++ b/src/net/minecraft/realms/Realms.java
@@ -5,7 +5,7 @@ import com.mojang.authlib.GameProfile;
 import com.mojang.util.UUIDTypeAdapter;
 import java.net.Proxy;
 import net.minecraft.client.Minecraft;
-import net.minecraft.client.gui.GuiMainMenu;
+import tk.wurst_client.gui.main.GuiWurstMainMenu;
 import net.minecraft.client.settings.GameSettings;
 import net.minecraft.util.Session;
 import net.minecraft.world.WorldSettings;
@@ -112,6 +112,6 @@ public class Realms
 
     public static boolean inTitleScreen()
     {
-        return Minecraft.getMinecraft().currentScreen != null && Minecraft.getMinecraft().currentScreen instanceof GuiMainMenu;
+        return Minecraft.getMinecraft().currentScreen != null && Minecraft.getMinecraft().currentScreen instanceof GuiWurstMainMenu;
     }
 }
diff --git a/src/net/minecraft/tileentity/TileEntitySign.java b/src/net/minecraft/tileentity/TileEntitySign.java
index f5cab9e..d422622 100644
--- a/src/net/minecraft/tileentity/TileEntitySign.java
+++ b/src/net/minecraft/tileentity/TileEntitySign.java
@@ -20,7 +20,7 @@ import net.minecraft.world.World;
 
 public class TileEntitySign extends TileEntity
 {
-    public final ITextComponent[] signText = new ITextComponent[] {new TextComponentString(""), new TextComponentString(""), new TextComponentString(""), new TextComponentString("")};
+    public ITextComponent[] signText = new ITextComponent[] {new TextComponentString(""), new TextComponentString(""), new TextComponentString(""), new TextComponentString("")};
 
     /**
      * The index of the line currently being edited. Only used on client side, but defined on both. Note this is only
-- 
2.0.0

